<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Release Notes | SUSE Linux Enterprise for High-Performance Computing 15 SP4</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Release Notes | SUSE Linux Enterprise for High-Perform…" />
<meta name="description" content="SUSE Linux Enterprise for High-Performance Computing is a highly-scalable, high-performance open-source operating system designed to utilize the power of paral…" />
<meta name="product-name" content="SUSE Linux Enterprise for High-Performance Computing" />
<meta name="product-number" content="15 SP4" />
<meta name="book-title" content="Release Notes" />
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-assignee" content="lukas.kucharczyk@suse.com" />
<meta name="tracker-bsc-component" content="Release Notes" />
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise HPC 15 SP4" />
<meta property="og:title" content="Release Notes | SUSE Linux Enterprise for High-Perform…" />
<meta property="og:description" content="SUSE Linux Enterprise for High-Performance Computing is a highly-scalable, high-performance open-source operating system designed to utilize the power of paral…" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Release Notes | SUSE Linux Enterprise for High-Perform…" />
<meta name="twitter:description" content="SUSE Linux Enterprise for High-Performance Computing is a highly-scalable, high-performance open-source operating system designed to utilize the power of paral…" />

<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="single offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><a href="https://www.suse.com"><img src="static/images/logo.svg" alt="Logo" /></a></div><div class="crumbs inactive"><a class="overview-link" href="https://www.suse.com/releasenotes" title="Back to Release Notes for SUSE products"><span class="overview-icon">Back to Release Notes for SUSE products</span></a><span> › </span><a class="single-crumb" href="#rnotes" accesskey="c"><span class="single-contents-icon"></span>Release Notes</a><div class="bubble-corner active-contents"></div></div><div class="clearme"></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs inactive"><a class="single-crumb" href="#rnotes" accesskey="c"><span class="single-contents-icon"></span>Show Contents: Release Notes</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="clearme"></div></div><div class="clearme"></div></div><div class="active-contents bubble"><div class="bubble-container"><div id="_bubble-toc"><ol><li class="inactive"><a href="#about"><span class="number">1 </span><span class="name">About the release notes</span></a></li><li class="inactive"><a href="#intro"><span class="number">2 </span><span class="name">SUSE Linux Enterprise for High-Performance Computing</span></a></li><li class="inactive"><a href="#related"><span class="number">3 </span><span class="name">Modules, extensions, and related products</span></a></li><li class="inactive"><a href="#intro-techpreview"><span class="number">4 </span><span class="name">Technology previews</span></a></li><li class="inactive"><a href="#modules"><span class="number">5 </span><span class="name">Modules</span></a></li><li class="inactive"><a href="#all-architecture"><span class="number">6 </span><span class="name">Changes affecting all architectures</span></a></li><li class="inactive"><a href="#removed-deprecated"><span class="number">7 </span><span class="name">Removed and deprecated features and packages</span></a></li><li class="inactive"><a href="#source-code"><span class="number">8 </span><span class="name">Obtaining source code</span></a></li><li class="inactive"><a href="#legal"><span class="number">9 </span><span class="name">Legal notices</span></a></li><li class="inactive"><a href="#changelog"><span class="number">A </span><span class="name">Changelog for 15 SP4</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_toc-bubble-wrap"></div><div id="_content" class=""><div class="documentation"><div xml:lang="en" class="article " id="rnotes" lang="en"><div class="titlepage"><div><h6 class="version-info"><span class="productname ">SUSE Linux Enterprise for High-Performance Computing</span> <span class="productnumber ">15 SP4</span></h6><div><h1 class="title">Release Notes <a title="Permalink" class="permalink" href="#rnotes">#</a></h1></div><div class="abstract "><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#id-1.2.7">#</a></h6></div><p>SUSE Linux Enterprise for High-Performance Computing is a highly-scalable, high-performance open-source operating system designed to utilize the power of parallel computing. This document provides an overview of high-level general features, capabilities, and limitations of SUSE Linux Enterprise for High-Performance Computing 15 SP4 and important product updates.</p><p>These release notes are updated periodically.
The latest version of these release notes is always available at <a class="link" href="https://www.suse.com/releasenotes" target="_blank">https://www.suse.com/releasenotes</a>.
General documentation can be found at <a class="link" href="https://documentation.suse.com/sle-hpc/15-SP4" target="_blank">https://documentation.suse.com/sle-hpc/15-SP4</a>.</p></div><div class="date"><span class="imprint-label">Publication Date: </span>2023-09-25, <span class="imprint-label">Version: </span>@VERSION@</div></div></div><div class="line"><div class="toc"><dl><dt><span class="section"><a href="#about"><span class="number">1 </span><span class="name">About the release notes</span></a></span></dt><dt><span class="section"><a href="#intro"><span class="number">2 </span><span class="name">SUSE Linux Enterprise for High-Performance Computing</span></a></span></dt><dd><dl><dt><span class="section"><a href="#intro-availability"><span class="number">2.1 </span><span class="name">Hardware Platform Support</span></a></span></dt><dt><span class="section"><a href="#intro-important"><span class="number">2.2 </span><span class="name">Important Sections of This Document</span></a></span></dt><dt><span class="section"><a href="#intro-lifecycle"><span class="number">2.3 </span><span class="name">Support and life cycle</span></a></span></dt><dt><span class="section"><a href="#intro-support"><span class="number">2.4 </span><span class="name">Support statement for SUSE Linux Enterprise for High-Performance Computing</span></a></span></dt><dt><span class="section"><a href="#intro-documentation"><span class="number">2.5 </span><span class="name">Documentation and other information</span></a></span></dt></dl></dd><dt><span class="section"><a href="#related"><span class="number">3 </span><span class="name">Modules, extensions, and related products</span></a></span></dt><dd><dl><dt><span class="section"><a href="#id-modules-in-the-sle-15sp4-product-line"><span class="number">3.1 </span><span class="name">Modules in the SLE 15 SP4 product line</span></a></span></dt><dt><span class="section"><a href="#id-available-extensions"><span class="number">3.2 </span><span class="name">Available extensions</span></a></span></dt><dt><span class="section"><a href="#id-related-products"><span class="number">3.3 </span><span class="name">Related products</span></a></span></dt></dl></dd><dt><span class="section"><a href="#intro-techpreview"><span class="number">4 </span><span class="name">Technology previews</span></a></span></dt><dd><dl><dt><span class="section"><a href="#jsc-SLE-15406"><span class="number">4.1 </span><span class="name">64K page size kernel flavor has been added</span></a></span></dt></dl></dd><dt><span class="section"><a href="#modules"><span class="number">5 </span><span class="name">Modules</span></a></span></dt><dd><dl><dt><span class="section"><a href="#id-hpc-module"><span class="number">5.1 </span><span class="name">HPC module</span></a></span></dt><dt><span class="section"><a href="#id-nvidia-compute-module"><span class="number">5.2 </span><span class="name">NVIDIA Compute Module</span></a></span></dt></dl></dd><dt><span class="section"><a href="#all-architecture"><span class="number">6 </span><span class="name">Changes affecting all architectures</span></a></span></dt><dd><dl><dt><span class="section"><a href="#jsc-SLE-24988"><span class="number">6.1 </span><span class="name">Enriched system visibility in the SUSE Customer Center (SCC)</span></a></span></dt><dt><span class="section"><a href="#jsc-SLE-22743"><span class="number">6.2 </span><span class="name">Automatically opened ports</span></a></span></dt><dt><span class="section"><a href="#id-dolly"><span class="number">6.3 </span><span class="name"><code class="literal">dolly</code></span></a></span></dt><dt><span class="section"><a href="#id-memkind"><span class="number">6.4 </span><span class="name"><code class="literal">memkind</code></span></a></span></dt><dt><span class="section"><a href="#id-openblas"><span class="number">6.5 </span><span class="name"><code class="literal">openblas</code></span></a></span></dt><dt><span class="section"><a href="#jsc-PED-2803"><span class="number">6.6 </span><span class="name"><code class="literal">spack</code></span></a></span></dt><dt><span class="section"><a href="#id-mpich"><span class="number">6.7 </span><span class="name"><code class="literal">mpich</code></span></a></span></dt><dt><span class="section"><a href="#jsc-SLE-12352"><span class="number">6.8 </span><span class="name">Slurm</span></a></span></dt><dt><span class="section"><a href="#id-creating-containers-from-current-hpc-environment"><span class="number">6.9 </span><span class="name">Creating containers from current HPC environment</span></a></span></dt><dt><span class="section"><a href="#jsc-PED-2802"><span class="number">6.10 </span><span class="name">Slurm 23.02</span></a></span></dt></dl></dd><dt><span class="section"><a href="#removed-deprecated"><span class="number">7 </span><span class="name">Removed and deprecated features and packages</span></a></span></dt><dd><dl><dt><span class="section"><a href="#removed"><span class="number">7.1 </span><span class="name">Removed features and packages</span></a></span></dt><dt><span class="section"><a href="#deprecated"><span class="number">7.2 </span><span class="name">Deprecated features and packages</span></a></span></dt></dl></dd><dt><span class="section"><a href="#source-code"><span class="number">8 </span><span class="name">Obtaining source code</span></a></span></dt><dt><span class="section"><a href="#legal"><span class="number">9 </span><span class="name">Legal notices</span></a></span></dt><dt><span class="appendix"><a href="#changelog"><span class="number">A </span><span class="name">Changelog for 15 SP4</span></a></span></dt><dd><dl><dt><span class="section"><a href="#prerelease"><span class="number">A.1 </span><span class="name">Pre-release</span></a></span></dt><dd><dl><dt><span class="section"><a href="#id-new"><span class="number">A.1.1 </span><span class="name">New</span></a></span></dt></dl></dd><dt><span class="section"><a href="#release-2022-11-30"><span class="number">A.2 </span><span class="name">2022-11-30</span></a></span></dt><dd><dl><dt><span class="section"><a href="#id-new-2"><span class="number">A.2.1 </span><span class="name">New</span></a></span></dt></dl></dd><dt><span class="section"><a href="#release-2022-08-31"><span class="number">A.3 </span><span class="name">2022-08-31</span></a></span></dt><dd><dl><dt><span class="section"><a href="#id-new-3"><span class="number">A.3.1 </span><span class="name">New</span></a></span></dt></dl></dd><dt><span class="section"><a href="#release-2022-05-11"><span class="number">A.4 </span><span class="name">2022-05-11</span></a></span></dt><dd><dl><dt><span class="section"><a href="#id-new-4"><span class="number">A.4.1 </span><span class="name">New</span></a></span></dt></dl></dd><dt><span class="section"><a href="#release-2022-03-23"><span class="number">A.5 </span><span class="name">2022-03-23</span></a></span></dt><dd><dl><dt><span class="section"><a href="#id-new-5"><span class="number">A.5.1 </span><span class="name">New</span></a></span></dt><dt><span class="section"><a href="#id-updates"><span class="number">A.5.2 </span><span class="name">Updates</span></a></span></dt></dl></dd><dt><span class="section"><a href="#release-2021-11-03"><span class="number">A.6 </span><span class="name">2021-11-03</span></a></span></dt></dl></dd></dl></div></div><div class="sect1" id="about"><div class="titlepage"><div><div><h2 class="title"><span class="number">1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">About the release notes</span> <a title="Permalink" class="permalink" href="#about">#</a></h2></div></div></div><p>These Release Notes are identical across all architectures, and the most recent version is always available online at <a class="link" href="https://www.suse.com/releasenotes" target="_blank">https://www.suse.com/releasenotes</a>.</p><p>Entries are only listed once but they can be referenced in several places if they are important and belong to more than one section.</p><p>Release notes usually only list changes that happened between two subsequent releases.
Certain important entries from the release notes of previous product versions are repeated.
To make these entries easier to identify, they contain a note to that effect.</p><p>However, repeated entries are provided as a courtesy only.
Therefore, if you are skipping one or more service packs, check the release notes of the skipped service packs as well.
If you are only reading the release notes of the current release, you could miss important changes.</p></div><div class="sect1" id="intro"><div class="titlepage"><div><div><h2 class="title"><span class="number">2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">SUSE Linux Enterprise for High-Performance Computing</span> <a title="Permalink" class="permalink" href="#intro">#</a></h2></div></div></div><p>SUSE Linux Enterprise for High-Performance Computing is a highly scalable, high performance open-source operating system designed to utilize the power of parallel computing for modeling, simulation and advanced analytics workloads.</p><p>SUSE Linux Enterprise for High-Performance Computing 15 SP4 provides tools and libraries related to High Performance Computing. This includes:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Workload manager</p></li><li class="listitem "><p>Remote and parallel shells</p></li><li class="listitem "><p>Performance monitoring and measuring tools</p></li><li class="listitem "><p>Serial console monitoring tool</p></li><li class="listitem "><p>Cluster power management tool</p></li><li class="listitem "><p>A tool for discovering the machine hardware topology</p></li><li class="listitem "><p>System monitoring</p></li><li class="listitem "><p>A tool for monitoring memory errors</p></li><li class="listitem "><p>A tool for determining the CPU model and its capabilities (x86-64 only)</p></li><li class="listitem "><p>User-extensible heap manager capable of distinguishing between different kinds of memory (x86-64 only)</p></li><li class="listitem "><p>Serial and parallel computational libraries providing the common standards BLAS, LAPACK, …​</p></li><li class="listitem "><p>Various MPI implementations</p></li><li class="listitem "><p>Serial and parallel libraries for the HDF5 file format</p></li></ul></div><div class="sect2" id="intro-availability"><div class="titlepage"><div><div><h3 class="title"><span class="number">2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Hardware Platform Support</span> <a title="Permalink" class="permalink" href="#intro-availability">#</a></h3></div></div></div><p>SUSE Linux Enterprise for High-Performance Computing 15 SP4 is available for the Intel 64/AMD64 (x86-64) and AArch64 platforms.</p></div><div class="sect2" id="intro-important"><div class="titlepage"><div><div><h3 class="title"><span class="number">2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Important Sections of This Document</span> <a title="Permalink" class="permalink" href="#intro-important">#</a></h3></div></div></div><p>If you are upgrading from a previous SUSE Linux Enterprise for High-Performance Computing release, you should review at least the following sections:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><a class="xref" href="#intro-support" title="2.4. Support statement for SUSE Linux Enterprise for High-Performance Computing">Section 2.4, “Support statement for SUSE Linux Enterprise for High-Performance Computing”</a></p></li></ul></div></div><div class="sect2" id="intro-lifecycle"><div class="titlepage"><div><div><h3 class="title"><span class="number">2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Support and life cycle</span> <a title="Permalink" class="permalink" href="#intro-lifecycle">#</a></h3></div></div></div><p>SUSE Linux Enterprise for High-Performance Computing is backed by award-winning support from SUSE, an established technology leader with a proven history of delivering enterprise-quality support services.</p><p>SUSE Linux Enterprise for High-Performance Computing 15 has a 13-year life cycle, with 10 years of General Support and 3 years of Extended Support.
The current version (SP4) will be fully maintained and supported until 6 months after the release of SUSE Linux Enterprise for High-Performance Computing 15 SP5.</p><p>Any release package is fully maintained and supported until the availability of the next release.</p><p>Extended Service Pack Overlay Support (ESPOS) and Long Term Service Pack Support (LTSS) are also available for this product. If you need additional time to design, validate and test your upgrade plans, Long Term Service Pack Support (LTSS) can extend the support you get by an additional 12 to 36 months in 12-month increments, providing a total of 3 to 5 years of support on any given Service Pack.</p><p>For more information, see:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>The support policy at <a class="link" href="https://www.suse.com/support/policy.html" target="_blank">https://www.suse.com/support/policy.html</a></p></li><li class="listitem "><p>Long Term Service Pack Support page at <a class="link" href="https://www.suse.com/support/programs/long-term-service-pack-support.html" target="_blank">https://www.suse.com/support/programs/long-term-service-pack-support.html</a></p></li></ul></div></div><div class="sect2" id="intro-support"><div class="titlepage"><div><div><h3 class="title"><span class="number">2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Support statement for SUSE Linux Enterprise for High-Performance Computing</span> <a title="Permalink" class="permalink" href="#intro-support">#</a></h3></div></div></div><p>To receive support, you need an appropriate subscription with SUSE.
For more information, see <a class="link" href="https://www.suse.com/support/programs/subscriptions/?id=SUSE_Linux_Enterprise_Server" target="_blank">https://www.suse.com/support/programs/subscriptions/?id=SUSE_Linux_Enterprise_Server</a>.</p><p>The following definitions apply:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.8.4.1"><span class="term ">L1</span></dt><dd><p>Problem determination, which means technical support designed to provide compatibility information, usage support, ongoing maintenance, information gathering and basic troubleshooting using available documentation.</p></dd><dt id="id-1.4.8.4.2"><span class="term ">L2</span></dt><dd><p>Problem isolation, which means technical support designed to analyze data, reproduce customer problems, isolate problem area and provide a resolution for problems not resolved by Level 1 or prepare for Level 3.</p></dd><dt id="id-1.4.8.4.3"><span class="term ">L3</span></dt><dd><p>Problem resolution, which means technical support designed to resolve problems by engaging engineering to resolve product defects which have been identified by Level 2 Support.</p></dd></dl></div><p>For contracted customers and partners, SUSE Linux Enterprise for High-Performance Computing is delivered with L3 support for all packages, except for the following:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Technology Previews, see <a class="xref" href="#intro-techpreview" title="4. Technology previews">Section 4, “Technology previews”</a></p></li><li class="listitem "><p>Sound, graphics, fonts and artwork</p></li><li class="listitem "><p>Packages that require an additional customer contract, see <a class="xref" href="#intro-support-external" title="2.4.1. Software requiring specific contracts">Section 2.4.1, “Software requiring specific contracts”</a></p></li></ul></div><p>SUSE will only support the usage of original packages. That is, packages that are unchanged and not recompiled.</p><div class="sect3" id="intro-support-external"><div class="titlepage"><div><div><h4 class="title"><span class="number">2.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Software requiring specific contracts</span> <a title="Permalink" class="permalink" href="#intro-support-external">#</a></h4></div></div></div><p>Certain software delivered as part of SUSE Linux Enterprise for High-Performance Computing may require an external contract.
Check the support status of individual packages using the RPM metadata that can be viewed with <code class="literal">rpm</code>, <code class="literal">zypper</code>, or YaST.</p></div><div class="sect3" id="intro-license-agpl"><div class="titlepage"><div><div><h4 class="title"><span class="number">2.4.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Software under GNU AGPL</span> <a title="Permalink" class="permalink" href="#intro-license-agpl">#</a></h4></div></div></div><p>SUSE Linux Enterprise for High-Performance Computing 15 SP4 (and the SUSE Linux Enterprise modules) includes the following software that is shipped <span class="emphasis"><em>only</em></span> under a GNU AGPL software license:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Ghostscript (including subpackages)</p></li></ul></div><p>SUSE Linux Enterprise for High-Performance Computing 15 SP4 (and the SUSE Linux Enterprise modules) includes the following software that is shipped under multiple licenses that include a GNU AGPL software license:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>MySpell dictionaries and LightProof</p></li><li class="listitem "><p>ArgyllCMS</p></li></ul></div></div></div><div class="sect2" id="intro-documentation"><div class="titlepage"><div><div><h3 class="title"><span class="number">2.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Documentation and other information</span> <a title="Permalink" class="permalink" href="#intro-documentation">#</a></h3></div></div></div><div class="sect3" id="intro-documentation-media"><div class="titlepage"><div><div><h4 class="title"><span class="number">2.5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Available on the product media</span> <a title="Permalink" class="permalink" href="#intro-documentation-media">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Read the READMEs on the media.</p></li><li class="listitem "><p>Get the detailed change log information about a particular package from the RPM (where <code class="literal"><span class="emphasis"><em>FILENAME</em></span>.rpm</code> is the name of the RPM):</p><div class="verbatim-wrap"><pre class="screen">rpm --changelog -qp FILENAME.rpm</pre></div></li><li class="listitem "><p>Check the <code class="literal">ChangeLog</code> file in the top level of the installation medium for a chronological log of all changes made to the updated packages.</p></li><li class="listitem "><p>Find more information in the <code class="literal">docu</code> directory of the installation medium of SUSE Linux Enterprise for High-Performance Computing 15 SP4.
This directory includes PDF versions of the SUSE Linux Enterprise for High-Performance Computing 15 SP4 Installation Quick Start Guide.</p></li></ul></div></div><div class="sect3" id="intro-documentation-external"><div class="titlepage"><div><div><h4 class="title"><span class="number">2.5.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Online documentation</span> <a title="Permalink" class="permalink" href="#intro-documentation-external">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>For the most up-to-date version of the documentation for SUSE Linux Enterprise for High-Performance Computing 15 SP4, see <a class="link" href="https://documentation.suse.com/sle-hpc/15-SP4" target="_blank">https://documentation.suse.com/sle-hpc/15-SP4</a>.</p></li><li class="listitem "><p>Find a collection of White Papers in the SUSE Linux Enterprise for High-Performance Computing Resource Library at <a class="link" href="https://www.suse.com/products/server#resources" target="_blank">https://www.suse.com/products/server#resources</a>.</p></li></ul></div></div></div></div><div class="sect1" id="related"><div class="titlepage"><div><div><h2 class="title"><span class="number">3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Modules, extensions, and related products</span> <a title="Permalink" class="permalink" href="#related">#</a></h2></div></div></div><p>This section comprises information about modules and extensions for SUSE Linux Enterprise for High-Performance Computing 15 SP4
Modules and extensions add functionality to the system.</p><div class="sect2" id="id-modules-in-the-sle-15sp4-product-line"><div class="titlepage"><div><div><h3 class="title"><span class="number">3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Modules in the SLE 15 SP4 product line</span> <a title="Permalink" class="permalink" href="#id-modules-in-the-sle-15sp4-product-line">#</a></h3></div></div></div><p>The SLE 15 SP4 product line is made up of modules that contain software packages. Each module has a clearly defined scope. Modules differ in their life cycles and update timelines.</p><p>The modules available within the product line based on SUSE Linux Enterprise 15 SP4 at the release of SUSE Linux Enterprise for High-Performance Computing 15 SP4 are listed in the <span class="emphasis"><em>Modules and Extensions Quick Start</em></span> at <a class="link" href="https://documentation.suse.com/sles/15-SP3/html/SLES-all/article-modules.html" target="_blank">https://documentation.suse.com/sles/15-SP3/html/SLES-all/article-modules.html</a>.</p><p>Not all SLE modules are available with a subscription for SUSE Linux Enterprise for High-Performance Computing 15 SP4 itself (see the column <span class="emphasis"><em>Available for</em></span>).</p><p>For information about the availability of individual packages within modules, see <a class="link" href="https://scc.suse.com/packages" target="_blank">https://scc.suse.com/packages</a>.</p></div><div class="sect2" id="id-available-extensions"><div class="titlepage"><div><div><h3 class="title"><span class="number">3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Available extensions</span> <a title="Permalink" class="permalink" href="#id-available-extensions">#</a></h3></div></div></div><p>The following extension is not covered by SUSE support agreements, available at no additional cost and without an extra registration key: SUSE Package Hub, see <a class="link" href="https://packagehub.suse.com/" target="_blank">https://packagehub.suse.com/</a>.</p></div><div class="sect2" id="id-related-products"><div class="titlepage"><div><div><h3 class="title"><span class="number">3.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Related products</span> <a title="Permalink" class="permalink" href="#id-related-products">#</a></h3></div></div></div><p>This sections lists related products. Usually, these products have their own release notes documents that are available from <a class="link" href="https://www.suse.com/releasenotes" target="_blank">https://www.suse.com/releasenotes</a>.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>SUSE Linux Enterprise Server: <a class="link" href="https://www.suse.com/products/server" target="_blank">https://www.suse.com/products/server</a></p></li><li class="listitem "><p>SUSE Linux Enterprise JeOS: <a class="link" href="https://www.suse.com/products/server/jeos" target="_blank">https://www.suse.com/products/server/jeos</a></p></li><li class="listitem "><p>SUSE Linux Enterprise Desktop: <a class="link" href="https://www.suse.com/products/desktop" target="_blank">https://www.suse.com/products/desktop</a></p></li><li class="listitem "><p>SUSE Linux Enterprise Server for SAP Applications: <a class="link" href="https://www.suse.com/products/sles-for-sap" target="_blank">https://www.suse.com/products/sles-for-sap</a></p></li><li class="listitem "><p>SUSE Linux Enterprise Real Time: <a class="link" href="https://www.suse.com/products/realtime" target="_blank">https://www.suse.com/products/realtime</a></p></li><li class="listitem "><p>SUSE Manager: <a class="link" href="https://www.suse.com/products/suse-manager" target="_blank">https://www.suse.com/products/suse-manager</a></p></li></ul></div></div></div><div class="sect1" id="intro-techpreview"><div class="titlepage"><div><div><h2 class="title"><span class="number">4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Technology previews</span> <a title="Permalink" class="permalink" href="#intro-techpreview">#</a></h2></div></div></div><p>Technology previews are packages, stacks, or features delivered by SUSE which are not supported.
They may be functionally incomplete, unstable or in other ways not suitable for production use.
They are included for your convenience and give you a chance to test new technologies within an enterprise environment.</p><p>Whether a technology preview becomes a fully supported technology later depends on customer and market feedback.
Technology previews can be dropped at any time and SUSE does not commit to providing a supported version of such technologies in the future.</p><p>Give your SUSE representative feedback about technology previews, including your experience and use case.</p><div class="sect2" id="jsc-SLE-15406"><div class="titlepage"><div><div><h3 class="title"><span class="number">4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">64K page size kernel flavor has been added</span> <a title="Permalink" class="permalink" href="#jsc-SLE-15406">#</a></h3></div></div></div><p>SUSE Linux Enterprise for High-Performance Computing for Arm 12 SP2 and later kernels have used a page size of 4K.
This offers the widest compatibility also for small systems with little RAM,
allowing to use Transparent Huge Pages (THP) where large pages make sense.</p><p>As a technology preview, SUSE Linux Enterprise for High-Performance Computing for Arm 15 SP4 adds a kernel flavor
<code class="literal">64kb</code>, offering a page size of 64 KiB and physical/virtual address size
of 52 bits.
Same as the <code class="literal">default</code> kernel flavor, it does not use preemption.</p><p>Main purpose at this time is to allow for side-by-side benchmarking for
High Performance Computing, Machine Learning and other Big Data use cases.
Contact your SUSE representative if you notice performance gains
for your specific workloads.</p><div id="id-1.6.5.5" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg" /><h6>Important: Swap needs to be re-initialized</h6><p>After booting the 64K kernel, any swap partitions need to re-initialized to be usable.
To do this, run the <code class="literal">swapon</code> command with the <code class="literal">--fixpgsz</code> parameter on the swap partition.
Note that this process deletes data present in the swap partition (for example, suspend data).
In this example, the swap partition is on <code class="literal">/dev/sdc1</code>:</p><div class="verbatim-wrap highlight bash"><pre class="screen">swapon --fixpgsz /dev/sdc1</pre></div></div><div id="id-1.6.5.6" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg" /><h6>Important: Btrfs file system uses page size as block size</h6><p>It is currently not possible to use Btrfs file systems across page sizes.
Block sizes below page size are not yet supported and block sizes above
page size might never be supported.</p><p>During installation, change the default partitioning proposal and choose
another file system, such as Ext4 or XFS, to allow rebooting from the
default 4K page size kernel of the Installer into <code class="literal">kernel-64kb</code> and back.</p><p>See the <span class="emphasis"><em>Storage Guide</em></span> for a discussion of supported file systems.</p></div><div id="id-1.6.5.7" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: RAID 5 uses page size as stripe size</h6><p>It is currently not yet possible to configure stripe size on volume creation.
This will lead to sub-optimal performance if page size and block size differ.</p><p>Avoid RAID 5 volumes when benchmarking 64K vs. 4K page size kernels.</p><p>See the <span class="emphasis"><em>Storage Guide</em></span> for more information on software RAID.</p></div><div id="id-1.6.5.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note: Cross-architecture compatibility considerations</h6><p>The SUSE Linux Enterprise for High-Performance Computing 15 SP4 kernels on x86-64 use 4K page size.</p><p>The SUSE Linux Enterprise for High-Performance Computing for POWER 15 SP4 kernel uses 64K page size.</p></div></div></div><div class="sect1" id="modules"><div class="titlepage"><div><div><h2 class="title"><span class="number">5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Modules</span> <a title="Permalink" class="permalink" href="#modules">#</a></h2></div></div></div><div class="sect2" id="id-hpc-module"><div class="titlepage"><div><div><h3 class="title"><span class="number">5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">HPC module</span> <a title="Permalink" class="permalink" href="#id-hpc-module">#</a></h3></div></div></div><p>The HPC module contains HPC specific packages. These include the workload manager Slurm, the node deployment tool <code class="literal">clustduct</code>, <code class="literal">munge</code> for user authentication, the remote shell <code class="literal">mrsh</code>, the parallel shell <code class="literal">pdsh</code>, as well as numerous HPC libraries and frameworks.</p><p>This module is available with the SUSE Linux Enterprise for High-Performance Computing only. It is selected by default during the installation. It can be added or removed using the YaST UI or the <code class="literal">SUSEConnect</code> CLI tool. Refer to the system administration guide for further details.</p></div><div class="sect2" id="id-nvidia-compute-module"><div class="titlepage"><div><div><h3 class="title"><span class="number">5.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">NVIDIA Compute Module</span> <a title="Permalink" class="permalink" href="#id-nvidia-compute-module">#</a></h3></div></div></div><p>The NVIDIA Compute Module provides the NVIDIA CUDA repository for SUSE Linux Enterprise 15. Note that that any software within this repository is under a 3rd party EULA. For more information check <a class="link" href="https://docs.nvidia.com/cuda/eula/index.html" target="_blank">https://docs.nvidia.com/cuda/eula/index.html</a>.</p><p>This module is not selected for addition by default when installing SUSE Linux Enterprise for High-Performance Computing. It may be selected manually during installation from the <span class="emphasis"><em>Extension and Modules</em></span> screen. You may also select it on an installed system using YaST. To do so, run from a shell as root <code class="literal">yast registration</code>, select: <code class="literal">Select Extensions</code> and search for <code class="literal">NVIDIA Compute Module</code> and press <code class="literal">Next</code>.</p><div id="id-1.7.3.4" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg" /><h6>Important</h6><p>Do not attempt to add this module with the <code class="literal">SUSEConnect</code> CLI tool. This tool is not yet capable of handling 3rd party repositories.</p></div><p>Once you have selected this module you will be asked to confirm the 3rd party license and verify the repository signing key.</p></div></div><div class="sect1" id="all-architecture"><div class="titlepage"><div><div><h2 class="title"><span class="number">6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Changes affecting all architectures</span> <a title="Permalink" class="permalink" href="#all-architecture">#</a></h2></div></div></div><p>Information in this section applies to all architectures supported by SUSE Linux Enterprise for High-Performance Computing 15 SP4.</p><div class="sect2" id="jsc-SLE-24988"><div class="titlepage"><div><div><h3 class="title"><span class="number">6.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Enriched system visibility in the SUSE Customer Center (SCC)</span> <a title="Permalink" class="permalink" href="#jsc-SLE-24988">#</a></h3></div></div></div><p>SUSE is committed to helping provide better insights into the consumption of SUSE subscriptions regardless of where they are running or how they are managed; physical or virtual, on-prem or in the cloud, connected to SCC or Repository Mirroring Tool (RMT), or managed by SUSE Manager.
To help you identify or filter out systems in SCC that are no longer running or decommissioned, SUSEConnect now features a daily “ping”, which will update system information automatically.</p><p>For more details see the documentation at <a class="link" href="https://documentation.suse.com/subscription/suseconnect/single-html/SLE-suseconnect-visibility/" target="_blank">https://documentation.suse.com/subscription/suseconnect/single-html/SLE-suseconnect-visibility/</a>.</p></div><div class="sect2" id="jsc-SLE-22743"><div class="titlepage"><div><div><h3 class="title"><span class="number">6.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Automatically opened ports</span> <a title="Permalink" class="permalink" href="#jsc-SLE-22743">#</a></h3></div></div></div><p>Installing the following packages automatically opens the following ports:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">dolly</code> - TCP ports 9997 and 9998</p></li><li class="listitem "><p><code class="literal">slurm</code> - TCP ports 6817, 6818, and 6819</p></li></ul></div><div id="id-1.8.4.4" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg" /><h6>Important</h6><p>These release notes only document changes in SUSE Linux Enterprise for High-Performance Computing compared to the immediate previous service pack of SUSE Linux Enterprise for High-Performance Computing.
The full changes and fixes can be found on the respective web site of the packages.</p></div></div><div class="sect2" id="id-dolly"><div class="titlepage"><div><div><h3 class="title"><span class="number">6.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">dolly</code></span> <a title="Permalink" class="permalink" href="#id-dolly">#</a></h3></div></div></div><p><code class="literal">dolly</code> has been updated to version 0.63.6.
It includes some fixes for hostname resolution, a better documentation and now provides a default configuration for firewall.</p></div><div class="sect2" id="id-memkind"><div class="titlepage"><div><div><h3 class="title"><span class="number">6.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">memkind</code></span> <a title="Permalink" class="permalink" href="#id-memkind">#</a></h3></div></div></div><p><code class="literal">memkind</code> has been updated to version 1.12.0.
The full list of changes is available at <a class="link" href="http://memkind.github.io/memkind/" target="_blank">http://memkind.github.io/memkind/</a>.</p></div><div class="sect2" id="id-openblas"><div class="titlepage"><div><div><h3 class="title"><span class="number">6.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">openblas</code></span> <a title="Permalink" class="permalink" href="#id-openblas">#</a></h3></div></div></div><p><code class="literal">openblas</code> has been updated to version 0.3.17.
It contains performance regression fixes and optimization.
For more information see <a class="link" href="https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.17" target="_blank">https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.17</a>.</p></div><div class="sect2" id="jsc-PED-2803"><div class="titlepage"><div><div><h3 class="title"><span class="number">6.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">spack</code></span> <a title="Permalink" class="permalink" href="#jsc-PED-2803">#</a></h3></div></div></div><div class="sect3" id="id-v0-19-1"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.6.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">v0.19.1</span> <a title="Permalink" class="permalink" href="#id-v0-19-1">#</a></h4></div></div></div><div class="sect4" id="id-spack-bugfixes"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Spack Bugfixes</span> <a title="Permalink" class="permalink" href="#id-spack-bugfixes">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">buildcache create</code>: make <code class="literal">file exists</code> less verbose</p></li><li class="listitem "><p><code class="literal">spack mirror create</code>: don’t change paths to urls</p></li><li class="listitem "><p>Improve error message for requirements</p></li><li class="listitem "><p>uninstall: fix accidental cubic complexity</p></li><li class="listitem "><p>scons: fix signature for <code class="literal">install_args</code></p></li><li class="listitem "><p>Fix <code class="literal">combine_phase_logs</code> text encoding issues</p></li><li class="listitem "><p>Use a module-like object to propagate changes in the MRO, when setting
build env</p></li><li class="listitem "><p>PackageBase should not define builder legacy attributes</p></li><li class="listitem "><p>Forward lookup of the <code class="literal">run_tests</code> attribute</p></li><li class="listitem "><p>Bugfix for timers</p></li><li class="listitem "><p>Fix path handling in prefix inspections</p></li><li class="listitem "><p>Fix libtool filter for Fujitsu compilers</p></li><li class="listitem "><p>FileCache: delete the new cache file on exception</p></li><li class="listitem "><p>Propagate exceptions from Spack python console</p></li><li class="listitem "><p>Tests: Fix a bug/typo in a <code class="literal">config_values.py</code> fixture</p></li><li class="listitem "><p>Various CI fixes</p></li><li class="listitem "><p>Docs: remove monitors and analyzers, typos</p></li><li class="listitem "><p>bump release version for tutorial command</p></li></ul></div></div></div><div class="sect3" id="id-v0-19-0"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.6.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">v0.19.0</span> <a title="Permalink" class="permalink" href="#id-v0-19-0">#</a></h4></div></div></div><p><code class="literal">v0.19.0</code> is a major feature release.</p><div class="sect4" id="id-major-features-in-this-release"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Major features in this release</span> <a title="Permalink" class="permalink" href="#id-major-features-in-this-release">#</a></h5></div></div></div><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p><span class="strong"><strong>Package requirements</strong></span></p><p>Spack’s traditional
<a class="link" href="https://spack.readthedocs.io/en/latest/build_settings.html#package-preferences" target="_blank">package
preferences</a> are soft, but we’ve added hard requriements to
<code class="literal">packages.yaml</code> and <code class="literal">spack.yaml</code> . Package requirements use the same
syntax as specs:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">packages:
  libfabric:
    require: "@1.13.2"
  mpich:
    require:
    - one_of: ["+cuda", "+rocm"]</pre></div><p>More details in
<a class="link" href="https://spack.readthedocs.io/en/latest/build_settings.html#package-requirements" target="_blank">the
docs</a>.</p></li><li class="listitem "><p><span class="strong"><strong>Environment UI Improvements</strong></span></p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Fewer surprising modifications to <code class="literal">spack.yaml</code> :</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">spack install</code> in an environment will no longer add to the <code class="literal">specs:</code>
list; you’ll need to either use <code class="literal">spack add &lt;spec&gt;</code> or
<code class="literal">spack install --add &lt;spec&gt;</code>.</p></li><li class="listitem "><p>Similarly, <code class="literal">spack uninstall</code> will not remove from your environment’s
<code class="literal">specs:</code> list; you’ll need to use <code class="literal">spack remove</code> or
<code class="literal">spack uninstall --remove</code>.</p><p>This will make it easier to manage an environment, as there is clear
separation between the stack to be installed (<code class="literal">spack.yaml</code>/<code class="literal">spack.lock</code>)
and which parts of it should be installed (<code class="literal">spack install</code> /
<code class="literal">spack uninstall</code>).</p></li></ul></div></li><li class="listitem "><p><code class="literal">concretizer:unify:true</code> is now the default mode for new environments</p><p>We see more users creating <code class="literal">unify:true</code> environments now. Users who need
<code class="literal">unify:false</code> can add it to their environment to get the old behavior.
This will concretize every spec in the environment independently.</p></li><li class="listitem "><p>Include environment configuration from URLs (
<a class="link" href="https://spack.readthedocs.io/en/latest/environments.html#included-configurations" target="_blank">docs</a>)</p><p>You can now include configuration in your environment directly from a
URL:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">spack:
  include:
  - https://github.com/path/to/raw/config/compilers.yaml</pre></div></li></ul></div></li><li class="listitem "><p><span class="strong"><strong>Compiler and variant propagation</strong></span></p><p>Currently, compiler flags and variants are inconsistent: compiler flags
set for a package are inherited by its dependencies, while variants are
not. We should have these be consistent by allowing for inheritance to
be enabled or disabled for both variants and compiler flags.</p><p>Example syntax:
* <code class="literal">package ++variant</code>: enabled variant that will be propagated to
dependencies
* <code class="literal">package +variant</code>: enabled variant that will NOT be propagated to
dependencies
* <code class="literal">package ~~variant</code>: disabled variant that will be propagated to
dependencies
* <code class="literal">package ~variant</code>: disabled variant that will NOT be propagated to
dependencies
* <code class="literal">package cflags==-g</code>: <code class="literal">cflags</code> will be propagated to dependencies
* <code class="literal">package cflags=-g</code>: <code class="literal">cflags</code> will NOT be propagated to dependencies</p><p>+
Syntax for non-boolan variants is similar to compiler flags. More in the
docs for
<a class="link" href="https://spack.readthedocs.io/en/latest/basic_usage.html#variants" target="_blank">variants</a>
and
<a class="link" href="https://spack.readthedocs.io/en/latest/basic_usage.html#compiler-flags" target="_blank">compiler
flags</a>.</p></li><li class="listitem "><p><span class="strong"><strong>Enhancements to git version specifiers</strong></span></p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">v0.18.0</code> added the ability to use git commits as versions. You can
now use the <code class="literal">git.</code> prefix to specify git tags or branches as versions.
All of these are valid git versions in <code class="literal">v0.19</code> :</p><div class="verbatim-wrap"><pre class="screen">foo@abcdef1234abcdef1234abcdef1234abcdef1234      # raw commit
foo@git.abcdef1234abcdef1234abcdef1234abcdef1234  # commit with git prefix
foo@git.develop                                   # the develop branch
foo@git.0.19                                      # use the 0.19 tag</pre></div></li><li class="listitem "><p><code class="literal">v0.19</code> also gives you more control over how Spack interprets git
versions, in case Spack cannot detect the version from the git
repository. You can suffix a git version with <code class="literal">=&lt;version&gt;</code> to force
Spack to concretize it as a particular version :</p><div class="verbatim-wrap"><pre class="screen"># use mybranch, but treat it as version 3.2 for version comparison
foo@git.mybranch=3.2

# use the given commit, but treat it as develop for version comparison
foo@git.abcdef1234abcdef1234abcdef1234abcdef1234=develop</pre></div><p>More in
<a class="link" href="https://spack.readthedocs.io/en/latest/basic_usage.html#version-specifier" target="_blank">the
docs</a></p></li></ul></div></li><li class="listitem "><p><span class="strong"><strong>Changes to Cray EX Support</strong></span></p><p>Cray machines have historically had their own platform within Spack,
because we needed to go through the module system to leverage compilers
and MPI installations on these machines. The Cray EX programming
environment now provides standalone <code class="literal">craycc</code> executables and proper
<code class="literal">mpicc</code> wrappers, so Spack can treat EX machines like Linux with extra
packages .</p><p>We expect this to greatly reduce bugs, as external packages and
compilers can now be used by prefix instead of through modules. We will
also no longer be subject to reproducibility issues when modules change
from Cray PE release to release and from site to site. This also
simplifies dealing with the underlying Linux OS on cray systems, as
Spack will properly model the machine’s OS as either SuSE or RHEL.</p></li><li class="listitem "><p><span class="strong"><strong>Improvements to tests and testing in CI</strong></span></p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">spack ci generate --tests</code> will generate a <code class="literal">.gitlab-ci.yml</code> file that
not only does builds but also runs tests for built packages . Public
GitHub pipelines now also run tests in CI.</p></li><li class="listitem "><p><code class="literal">spack test run --explicit</code> will only run tests for packages that are
explicitly installed, instead of all packages.</p></li></ul></div></li><li class="listitem "><p><span class="strong"><strong>Experimental binding link model</strong></span></p><p>You can add a new option to <code class="literal">config.yaml</code> to make Spack embed absolute
paths to needed shared libraries in ELF executables and shared libraries
on Linux (
<a class="link" href="https://spack.readthedocs.io/en/latest/config_yaml.html#shared-linking-bind" target="_blank">docs</a>):</p><div class="verbatim-wrap highlight yaml"><pre class="screen">config:
  shared_linking:
    type: rpath
    bind: true</pre></div><p>This can improve launch time at scale for parallel applications, and it
can make installations less susceptible to environment variables like
<code class="literal">LD_LIBRARY_PATH</code>, even especially when dealing with external libraries
that use <code class="literal">RUNPATH</code>. You can think of this as a faster, even
higher-precedence version of <code class="literal">RPATH</code>.</p></li></ol></div></div><div class="sect4" id="id-other-new-features-of-note"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Other new features of note</span> <a title="Permalink" class="permalink" href="#id-other-new-features-of-note">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">spack spec</code> prints dependencies more legibly. Dependencies in the
output now appear at the <span class="emphasis"><em>earliest</em></span> level of indentation possible</p></li><li class="listitem "><p>You can override <code class="literal">package.py</code> attributes like <code class="literal">url</code>, directly in
<code class="literal">packages.yaml</code> (
<a class="link" href="https://spack.readthedocs.io/en/latest/build_settings.html#assigning-package-attributes" target="_blank">docs</a>)</p></li><li class="listitem "><p>There are a number of new architecture-related format strings you can
use in Spack configuration files to specify paths (
<a class="link" href="https://spack.readthedocs.io/en/latest/configuration.html#config-file-variables" target="_blank">docs</a>)</p></li></ul></div></div><div class="sect4" id="id-performance-improvements"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Performance Improvements</span> <a title="Permalink" class="permalink" href="#id-performance-improvements">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Major performance improvements for installation from binary caches</p></li><li class="listitem "><p>Test suite can now be parallelized using <code class="literal">xdist</code> (used in GitHub
Actions)</p></li><li class="listitem "><p>Reduce lock contention for parallel builds in environments</p></li></ul></div></div><div class="sect4" id="id-new-binary-caches-and-stacks"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">New binary caches and stacks</span> <a title="Permalink" class="permalink" href="#id-new-binary-caches-and-stacks">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>We now build nearly all of E4S with <code class="literal">oneapi</code> in our buildcache</p></li><li class="listitem "><p>Added 3 new machine learning-centric stacks to binary cache:
<code class="literal">x86_64_v3</code>, CUDA, ROCm</p></li></ul></div></div><div class="sect4" id="id-removals-and-deprecations"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.2.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Removals and Deprecations</span> <a title="Permalink" class="permalink" href="#id-removals-and-deprecations">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Support for Python 3.5 is dropped . Only Python 2.7 and 3.6+ are
officially supported.</p></li><li class="listitem "><p>This is the last Spack release that will support Python 2 . Spack
<code class="literal">v0.19</code> will emit a deprecation warning if you run it with Python 2, and
Python 2 support will soon be removed from the <code class="literal">develop</code> branch.</p></li><li class="listitem "><p><code class="literal">LD_LIBRARY_PATH</code> is no longer set by default by <code class="literal">spack load</code> or
module loads.</p><p>Setting <code class="literal">LD_LIBRARY_PATH</code> in Spack environments/modules can cause
binaries from outside of Spack to crash, and Spack’s own builds use
<code class="literal">RPATH</code> and do not need <code class="literal">LD_LIBRARY_PATH</code> set in order to run. If you
still want the old behavior, you can run these commands to configure
Spack to set <code class="literal">LD_LIBRARY_PATH</code>:</p><div class="verbatim-wrap"><pre class="screen">spack config add modules:prefix_inspections:lib64:[LD_LIBRARY_PATH]
spack config add modules:prefix_inspections:lib:[LD_LIBRARY_PATH]</pre></div></li><li class="listitem "><p>The <code class="literal">spack:concretization:[together|separately]</code> has been removed
after being deprecated in <code class="literal">v0.18</code>. Use <code class="literal">concretizer:unify:[true|false]</code>.</p></li><li class="listitem "><p><code class="literal">config:module_roots</code> is no longer supported after being deprecated in
<code class="literal">v0.18</code>. Use configuration in module sets instead (
<a class="link" href="https://spack.readthedocs.io/en/latest/module_file_support.html" target="_blank">docs</a>).</p></li><li class="listitem "><p><code class="literal">spack activate</code> and <code class="literal">spack deactivate</code> are no longer supported,
having been deprecated in <code class="literal">v0.18</code>. Use an environment with a view
instead of activating/deactivating
(<a class="link" href="https://spack.readthedocs.io/en/latest/environments.html#configuration-in-spack-yaml" target="_blank">docs</a>).</p></li><li class="listitem "><p>The old YAML format for buildcaches is now deprecated . If you are
using an old buildcache with YAML metadata you will need to regenerate
it with JSON metadata.</p></li><li class="listitem "><p><code class="literal">spack bootstrap trust</code> and <code class="literal">spack bootstrap untrust</code> are deprecated
in favor of <code class="literal">spack bootstrap enable</code> and <code class="literal">spack bootstrap disable</code> and
will be removed in <code class="literal">v0.20</code>.</p></li><li class="listitem "><p>The <code class="literal">graviton2</code> architecture has been renamed to <code class="literal">neoverse_n1</code>, and
<code class="literal">graviton3</code> is now <code class="literal">neoverse_v1</code>. Buildcaches using the old architecture
names will need to be rebuilt.</p></li><li class="listitem "><p>The terms <code class="literal">blacklist</code> and <code class="literal">whitelist</code> have been replaced with
<code class="literal">include</code> and <code class="literal">exclude</code> in all configuration files . You can use
<code class="literal">spack config update</code> to automatically fix your configuration files.</p></li></ul></div></div><div class="sect4" id="id-notable-bugfixes"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.2.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Notable Bugfixes</span> <a title="Permalink" class="permalink" href="#id-notable-bugfixes">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Permission setting on installation now handles effective uid properly</p></li><li class="listitem "><p><code class="literal">buildable:true</code> for an MPI implementation now overrides
<code class="literal">buildable:false</code> for <code class="literal">mpi</code></p></li><li class="listitem "><p>Improved error messages when attempting to use an unconfigured
compiler</p></li><li class="listitem "><p>Do not punish explicitly requested compiler mismatches in the solver</p></li><li class="listitem "><p><code class="literal">spack stage</code>: add missing –fresh and –reuse</p></li><li class="listitem "><p>Fixes for adding build system executables like <code class="literal">cmake</code> to package
scope</p></li><li class="listitem "><p>Bugfix for binary relocation with aliased strings produced by newer
<code class="literal">binutils</code></p></li></ul></div></div></div><div class="sect3" id="id-v0-18-1"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.6.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">v0.18.1</span> <a title="Permalink" class="permalink" href="#id-v0-18-1">#</a></h4></div></div></div><div class="sect4" id="id-spack-bugfixes-2"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Spack Bugfixes</span> <a title="Permalink" class="permalink" href="#id-spack-bugfixes-2">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Fix several bugs related to bootstrapping</p></li><li class="listitem "><p>Fix a regression that was causing spec hashes to differ between Python
2 and Python 3</p></li><li class="listitem "><p>Fixed compiler flags for oneAPI and DPC++</p></li><li class="listitem "><p>Fixed several issues related to concretization</p></li><li class="listitem "><p>Improved support for Cray manifest file and <code class="literal">spack external find</code></p></li><li class="listitem "><p>Assign a version to openSUSE Tumbleweed according to the GLIBC version
in the system</p></li><li class="listitem "><p>Improved Dockerfile generation for <code class="literal">spack containerize</code></p></li><li class="listitem "><p>Fixed a few bugs related to concurrent execution of commands</p></li></ul></div></div><div class="sect4" id="id-package-updates"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Package updates</span> <a title="Permalink" class="permalink" href="#id-package-updates">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>WarpX: add v22.06, fixed libs property</p></li><li class="listitem "><p>openPMD: add v0.14.5, update recipe for @develop</p></li></ul></div></div></div><div class="sect3" id="id-v0-18-0"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.6.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">v0.18.0</span> <a title="Permalink" class="permalink" href="#id-v0-18-0">#</a></h4></div></div></div><p><code class="literal">v0.18.0</code> is a major feature release.</p><div class="sect4" id="id-major-features-in-this-release-2"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Major features in this release</span> <a title="Permalink" class="permalink" href="#id-major-features-in-this-release-2">#</a></h5></div></div></div><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p><span class="strong"><strong>Concretizer now reuses by default</strong></span></p><p><code class="literal">spack install --reuse</code> was introduced in <code class="literal">v0.17.0</code>, and <code class="literal">--reuse</code> is
now the default concretization mode. Spack will try hard to resolve
dependencies using installed packages or binaries .</p><p>To avoid reuse and to use the latest package configurations, (the old
default), you can use <code class="literal">spack install --fresh</code>, or add configuration like
this to your environment or <code class="literal">concretizer.yaml</code>:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">concretizer:
    reuse: false</pre></div></li><li class="listitem "><p><span class="strong"><strong>Finer-grained hashes</strong></span></p><p>Spack hashes now include <code class="literal">link</code>, <code class="literal">run</code>, <span class="emphasis"><em>and</em></span> <code class="literal">build</code> dependencies, as
well as a canonical hash of package recipes. Previously, hashes only
included <code class="literal">link</code> and <code class="literal">run</code> dependencies (though <code class="literal">build</code> dependencies were
stored by environments). We coarsened the hash to reduce churn in user
installations, but the new default concretizer behavior mitigates this
concern and gets us reuse <span class="emphasis"><em>and</em></span> provenance. You will be able to see the
build dependencies of new installations with <code class="literal">spack find</code>. Old
installations will not change and their hashes will not be affected.</p></li><li class="listitem "><p><span class="strong"><strong>Improved error messages</strong></span></p><p>Error handling with the new concretizer is now done with optimization
criteria rather than with unsatisfiable cores, and Spack reports many
more details about conflicting constraints.</p></li><li class="listitem "><p><span class="strong"><strong>Unify environments when possible</strong></span></p><p>Environments have thus far supported <code class="literal">concretization: together</code> or
<code class="literal">concretization: separately</code>. These have been replaced by a new
preference in <code class="literal">concretizer.yaml</code>:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">concretizer:
    unify: [true|false|when_possible]</pre></div><p><code class="literal">concretizer:unify:when_possible</code> will <span class="emphasis"><em>try</em></span> to resolve a fully unified
environment, but if it cannot, it will create multiple configurations of
some packages where it has to. For large environments that previously
had to be concretized separately, this can result in a huge speedup
(40-50x).</p></li><li class="listitem "><p><span class="strong"><strong>Automatically find externals on Cray machines</strong></span></p><p>Spack can now automatically discover installed packages in the Cray
Programming Environment by running <code class="literal">spack external find</code> (or
<code class="literal">spack external read-cray-manifest</code> to <span class="emphasis"><em>only</em></span> query the PE). Packages
from the PE (e.g., <code class="literal">cray-mpich</code> are added to the database with full
dependency information, and compilers from the PE are added to
<code class="literal">compilers.yaml</code>. Available with the June 2022 release of the Cray
Programming Environment.</p></li><li class="listitem "><p><span class="strong"><strong>New binary format and hardened signing</strong></span></p><p>Spack now has an updated binary format, with improvements for security.
The new format has a detached signature file, and Spack verifies the
signature before untarring or decompressing the binary package. The
previous format embedded the signature in a <code class="literal">tar</code> file, which required
the client to run <code class="literal">tar</code> <span class="emphasis"><em>before</em></span> verifying . Spack can still install
from build caches using the old format, but we encourage users to switch
to the new format going forward.</p><p>Production GitLab pipelines have been hardened to securely sign
binaries. There is now a separate signing stage so that signing keys are
never exposed to build system code, and signing keys are ephemeral and
only live as long as the signing pipeline stage.</p></li><li class="listitem "><p><span class="strong"><strong>Bootstrap mirror generation</strong></span></p><p>The <code class="literal">spack bootstrap mirror</code> command can automatically create a mirror
for bootstrapping the concretizer and other needed dependencies in an
air-gapped environment.</p></li><li class="listitem "><p><span class="strong"><strong>Makefile generation</strong></span></p><p><code class="literal">spack env depfile</code> can be used to generate a <code class="literal">Makefile</code> from an
environment, which can be used to build packages the environment in
parallel on a single node. e.g.:</p><div class="verbatim-wrap"><pre class="screen">spack -e myenv env depfile &gt; Makefile
make</pre></div><p>Spack propagates <code class="literal">gmake</code> jobserver information to builds so that their
jobs can share cores.</p></li><li class="listitem "><p><span class="strong"><strong>New variant features</strong></span></p><p>In addition to being conditional themselves, variants can now have
<a class="link" href="https://spack.readthedocs.io/en/latest/packaging_guide.html#conditional-possible-values" target="_blank">conditional
<span class="emphasis"><em>values</em></span></a> that are only possible for certain configurations of a
package.</p><p>Variants can be
<a class="link" href="https://spack.readthedocs.io/en/latest/packaging_guide.html#sticky-variants" target="_blank">declared sticky</a>, which prevents them from being enabled or disabled by the
concretizer. Sticky variants must be set explicitly by users on the
command line or in <code class="literal">packages.yaml</code>.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Allow conditional possible values in variants</p></li><li class="listitem "><p>Add a sticky property to variants</p></li></ul></div></li></ol></div></div><div class="sect4" id="id-other-new-features-of-note-2"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.4.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Other new features of note</span> <a title="Permalink" class="permalink" href="#id-other-new-features-of-note-2">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Environment views can optionally link only <code class="literal">run</code> dependencies with
<code class="literal">link:run</code></p></li><li class="listitem "><p><code class="literal">spack external find --all</code> finds library-only packages in addition to
build dependencies</p></li><li class="listitem "><p>Customizable <code class="literal">config:license_dir</code> option</p></li><li class="listitem "><p><code class="literal">spack external find --path PATH</code> takes a custom search path</p></li><li class="listitem "><p><code class="literal">spack spec</code> has a new <code class="literal">--format</code> argument like <code class="literal">spack find</code></p></li><li class="listitem "><p><code class="literal">spack concretize --quiet</code> skips printing concretized specs</p></li><li class="listitem "><p><code class="literal">spack info</code> now has cleaner output and displays test info</p></li><li class="listitem "><p>Package-level submodule option for git commit versions</p></li><li class="listitem "><p>Using <code class="literal">/hash</code> syntax to refer to concrete specs in an environment now
works even if <code class="literal">/hash</code> is not installed.</p></li></ul></div></div><div class="sect4" id="id-major-internal-refactors"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.4.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Major internal refactors</span> <a title="Permalink" class="permalink" href="#id-major-internal-refactors">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>full hash (see above)</p></li><li class="listitem "><p>new develop versioning scheme <code class="literal">0.19.0-dev0</code></p></li><li class="listitem "><p>Allow for multiple dependencies/dependents from the same package</p></li><li class="listitem "><p>Splice differing virtual packages</p></li></ul></div></div><div class="sect4" id="id-performance-improvements-2"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.4.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Performance Improvements</span> <a title="Permalink" class="permalink" href="#id-performance-improvements-2">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Concretization of large environments with <code class="literal">unify: when_possible</code> is
much faster than concretizing separately (see above)</p></li><li class="listitem "><p>Single-pass view generation algorithm is 2.6x faster</p></li></ul></div></div><div class="sect4" id="id-archspec-improvements"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.4.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Archspec improvements</span> <a title="Permalink" class="permalink" href="#id-archspec-improvements">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">oneapi</code> and <code class="literal">dpcpp</code> flag support</p></li><li class="listitem "><p>better support for <code class="literal">M1</code> and <code class="literal">a64fx</code></p></li></ul></div></div><div class="sect4" id="id-removals-and-deprecations-2"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.4.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Removals and Deprecations</span> <a title="Permalink" class="permalink" href="#id-removals-and-deprecations-2">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Spack no longer supports Python <code class="literal">2.6</code></p></li><li class="listitem "><p>Removed deprecated <code class="literal">--run-tests</code> option of <code class="literal">spack install</code>; use
<code class="literal">spack test</code></p></li><li class="listitem "><p>Removed deprecated <code class="literal">spack flake8</code>; use <code class="literal">spack style</code></p></li><li class="listitem "><p>Deprecate <code class="literal">spack:concretization</code> config option; use
<code class="literal">concretizer:unify</code></p></li><li class="listitem "><p>Deprecate top-level module configuration; use module sets</p></li><li class="listitem "><p><code class="literal">spack activate</code> and <code class="literal">spack deactivate</code> are deprecated in favor of
environments; will be removed in <code class="literal">0.19.0</code></p></li></ul></div></div><div class="sect4" id="id-notable-bugfixes-2"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.4.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Notable Bugfixes</span> <a title="Permalink" class="permalink" href="#id-notable-bugfixes-2">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Fix bug that broke locks with many parallel builds</p></li><li class="listitem "><p>Many bugfixes and consistency improvements for the new concretizer and
<code class="literal">--reuse</code></p></li></ul></div></div><div class="sect4" id="id-packages"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.6.4.8 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Packages</span> <a title="Permalink" class="permalink" href="#id-packages">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">CMakePackage</code> uses <code class="literal">CMAKE_INSTALL_RPATH_USE_LINK_PATH</code></p></li><li class="listitem "><p>Refactored <code class="literal">lua</code> support: <code class="literal">lua-lang</code> virtual supports both <code class="literal">lua</code> and
<code class="literal">luajit</code> via new <code class="literal">LuaPackage</code> build system</p></li><li class="listitem "><p>PythonPackage: now installs packages with <code class="literal">pip</code></p></li><li class="listitem "><p>Python: improve site_packages_dir handling</p></li><li class="listitem "><p>Extends: support spec, not just package name</p></li><li class="listitem "><p>Use stable URLs and <code class="literal">?full_index=1</code> for all github patches</p></li></ul></div></div></div></div><div class="sect2" id="id-mpich"><div class="titlepage"><div><div><h3 class="title"><span class="number">6.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">mpich</code></span> <a title="Permalink" class="permalink" href="#id-mpich">#</a></h3></div></div></div><p><code class="literal">mpich</code> has been updated to version 3.4.2.
For more information see <a class="link" href="https://www.mpich.org/2021/05/28/mpich-3-4-2-released/" target="_blank">https://www.mpich.org/2021/05/28/mpich-3-4-2-released/</a>.</p></div><div class="sect2" id="jsc-SLE-12352"><div class="titlepage"><div><div><h3 class="title"><span class="number">6.8 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Slurm</span> <a title="Permalink" class="permalink" href="#jsc-SLE-12352">#</a></h3></div></div></div><div class="sect3" id="id-important-notes-for-upgrading-slurm-releases"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.8.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Important Notes for Upgrading Slurm Releases:</span> <a title="Permalink" class="permalink" href="#id-important-notes-for-upgrading-slurm-releases">#</a></h4></div></div></div><p>If using the slurmdbd (Slurm DataBase Daemon) you must update this first.
If using a backup DBD you must start the primary first to do any
database conversion, the backup will not start until this has happened.</p></div><div class="sect3" id="jsc-SLE-21334"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.8.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Slurm version 22.05</span> <a title="Permalink" class="permalink" href="#jsc-SLE-21334">#</a></h4></div></div></div><p>An update to <code class="literal">Slurm</code> version 22.05 is available.</p><div class="sect4" id="id-important-notes-for-upgrading-to-version-22-05"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.8.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Important notes for upgrading to version 22.05</span> <a title="Permalink" class="permalink" href="#id-important-notes-for-upgrading-to-version-22-05">#</a></h5></div></div></div><p>Slurmdbd version 22.05 will work Slurm daemons of version 20.11.
You will not need to update all clusters at the same time, but it is very
important to update slurmdbd first and having it running before updating
any other clusters making use of it.</p><p>Slurm can be upgraded from version 20.11 to version 22.05 without loss of jobs
or other state information. Upgrading directly from an earlier version
of Slurm will result in loss of state information.</p><p>For more information and a recommended upgrade procedure, see the section
"Upgrading Slurm" in the chapter "Slurm — utility for HPC workload management"
of the in the SLE HPC 15 "Administration Guide".</p><p>All SPANK plugins must be recompiled when upgrading from any Slurm version
prior to 22.05.</p><p>If you are using the Slurm plugin for pdsh you must make sure,
<code class="literal">pdsh_slurm_22_05</code> is installed together with slurm_22_05.</p></div><div class="sect4" id="id-highlights-of-version-20-11"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.8.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Highlights of version  20.11</span> <a title="Permalink" class="permalink" href="#id-highlights-of-version-20-11">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>The template <code class="literal">slurmrestd.service</code> unit file now defaults to listen on both the
Unix socket and the <code class="literal">slurmrestd</code> port.</p></li><li class="listitem "><p>The template <code class="literal">slurmrestd.service</code> unit file now defaults to enable auth/jwt
and the munge unit is no longer a dependency by default.</p></li><li class="listitem "><p>Add extra <span class="quote">“<span class="quote ">EnvironmentFile=-/etc/default/$service</span>”</span> setting to service files.</p></li><li class="listitem "><p>Allow jobs to pack onto nodes already rebooting with the desired features.</p></li><li class="listitem "><p>Reset job start time after nodes are rebooted, previously only done for
cloud/power save boots.</p></li><li class="listitem "><p>Node features (if any) are passed to <code class="literal">RebootProgram</code> if run from <code class="literal">slurmctld</code>.</p></li><li class="listitem "><p>Fail srun when using invalid <code class="literal">--cpu-bind options</code> (e.g. <code class="literal">--cpu-bind=map_cpu:99</code>
when only 10 CPUs are allocated).</p></li><li class="listitem "><p>Storing batch scripts and env vars are now in indexed tables using
substantially less disk space.  Those storing scripts in 21.08 will all
be moved and indexed automatically.</p></li><li class="listitem "><p>Run <code class="literal">MailProg</code> through <code class="literal">slurmscriptd</code> instead of directly fork+exec()'ing
from <code class="literal">slurmctld</code>.</p></li><li class="listitem "><p>Add <code class="literal">acct_gather_interconnect/sysfs</code> plugin.</p></li><li class="listitem "><p>Future and Cloud nodes are treated as "Planned Down" in usage reports.</p></li><li class="listitem "><p>Add new shard plugin for sharing GPUs but not with mps.</p></li><li class="listitem "><p>Add support for Lenovo SD650 V2 in <code class="literal">acct_gather_energy/xcc</code> plugin.</p></li><li class="listitem "><p>Remove <code class="literal">cgroup_allowed_devices_file.conf</code>, since the default policy in modern
kernels is to whitelist by default. Denying specific devices must be done
through <code class="literal">gres.conf</code>.</p></li><li class="listitem "><p>Node state flags (<code class="literal">DRAIN</code>, <code class="literal">FAILED</code>, <code class="literal">POWERING UP</code>, etc.) will be cleared now if
node state is updated to <code class="literal">FUTURE</code>.</p></li><li class="listitem "><p><code class="literal">srun</code> will no longer read in <code class="literal">SLURM_CPUS_PER_TASK</code>. This means you will
implicitly have to specify <code class="literal">--cpus-per-task</code> on your <code class="literal">srun</code> calls, or set the
new <code class="literal">SRUN_CPUS_PER_TASK</code> environment variable to accomplish the same thing.</p></li><li class="listitem "><p>Remove <code class="literal">connect_timeout</code> and timeout options from <code class="literal">JobCompParams</code> as there’s no
longer a connectivity check happening in the <code class="literal">jobcomp/elasticsearch</code> plugin
when setting the location off of <code class="literal">JobCompLoc</code>.</p></li><li class="listitem "><p>Add support for hourly reoccurring reservations.</p></li><li class="listitem "><p>Allow nodes to be dynamically added and removed from the system. Configure
<code class="literal">MaxNodeCount</code> to accomodate nodes created with dynamic node registrations
(<code class="literal">slurmd -Z --conf=""</code>) and <code class="literal">scontrol</code>.</p></li><li class="listitem "><p>Added support for Cgroup Version 2.</p></li><li class="listitem "><p><code class="literal">sacct</code> - allocations made by <code class="literal">srun</code> will now always display the allocation and
step(s). Previously, the allocation and step were combined when possible.</p></li><li class="listitem "><p><code class="literal">cons_tres</code> - change definition of the "least loaded node" (LLN) to the node
with the greatest ratio of available CPUs to total CPUs.</p></li><li class="listitem "><p>Add support to ship <code class="literal">Include</code> configuration files with configless.</p></li><li class="listitem "><p>Provide a detailed reason in the job log as to why it has been terminated
when hitting a resource limit.</p></li><li class="listitem "><p>Pass and use <code class="literal">alias_list</code> through credential instead of environment variable.</p></li><li class="listitem "><p>Add ability to get host addresses from <code class="literal">nss_slurm</code>.</p></li><li class="listitem "><p>Enable reverse fanout for <code class="literal">cloud+alias_list jobs</code>.</p></li><li class="listitem "><p>Add support to delete/update nodes by specifying nodesets or the 'ALL'
keyword alongside the delete/update node message nodelist expression (i.e.
<code class="literal">scontrol delete/update NodeName=ALL</code> or <code class="literal">scontrol delete/update NodeName=ns1,nodes[1-3]</code>).</p></li><li class="listitem "><p>Expanded the set of environment variables accessible through Prolog/Epilog
and <code class="literal">PrologSlurmctld</code>/<code class="literal">EpilogSlurmctld</code> to include <code class="literal">SLURM_JOB_COMMENT</code>,
<code class="literal">SLURM_JOB_STDERR</code>, <code class="literal">SLURM_JOB_STDIN</code>, <code class="literal">SLURM_JOB_STDOUT</code>, <code class="literal">SLURM_JOB_PARTITION</code>,
<code class="literal">SLURM_JOB_ACCOUNT</code>, <code class="literal">SLURM_JOB_RESERVATION</code>, <code class="literal">SLURM_JOB_CONSTRAINTS</code>,
<code class="literal">SLURM_JOB_NUM_HOSTS</code>, <code class="literal">SLURM_JOB_CPUS_PER_NODE</code>, <code class="literal">SLURM_JOB_NTASKS</code>, and
<code class="literal">SLURM_JOB_RESTART_COUNT</code>.</p></li><li class="listitem "><p>Attempt to requeue jobs terminated by <code class="literal">slurm.conf</code> changes (node vanish, node
socket/core change, etc). Processes may still be running on excised nodes.
Admin should take precautions when removing nodes that have jobs on running
on them.</p></li><li class="listitem "><p>Add <code class="literal">switch/hpe_slingshot</code> plugin.</p></li><li class="listitem "><p>Add new <code class="literal">SchedulerParameters</code> option <code class="literal">bf_licenses</code> to track licenses as
within the backfill scheduler.</p></li></ul></div></div><div class="sect4" id="id-configureation-file-changes-for-details-see-the-appropriate-man-page"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.8.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configureation File changes (for details, see the appropriate man page)</span> <a title="Permalink" class="permalink" href="#id-configureation-file-changes-for-details-see-the-appropriate-man-page">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">AcctGatherEnergyType</code> <code class="literal">rsmi</code> is now <code class="literal">gpu</code>.</p></li><li class="listitem "><p><code class="literal">TaskAffinity</code> parameter was removed from <code class="literal">cgroup.conf</code>.</p></li><li class="listitem "><p>Fatal if the mutually-exclusive <code class="literal">JobAcctGatherParams</code> options of <code class="literal">UsePss</code> and
<code class="literal">NoShared</code> are both defined.</p></li><li class="listitem "><p><code class="literal">KeepAliveTime</code> has been moved into <code class="literal">CommunicationParameters</code>. The standalone
option will be removed in a future version.</p></li><li class="listitem "><p><code class="literal">preempt/qos</code> - add support for WITHIN mode to allow for preemption between
jobs within the same QOS.</p></li><li class="listitem "><p>Fatal error if <code class="literal">CgroupReleaseAgentDir</code> is configured in <code class="literal">cgroup.conf</code>. The
option has long been obsolete.</p></li><li class="listitem "><p>Fatal if more than one burst buffer plugin is configured.</p></li><li class="listitem "><p>Added <code class="literal">keepaliveinterval</code> and <code class="literal">keepaliveprobes</code> to <code class="literal">CommunicationParameters</code>.</p></li><li class="listitem "><p>Added <code class="literal">new max_token_lifespan=&lt;seconds&gt;</code> to <code class="literal">AuthAltParameters</code> to allow sites
to restrict the lifespan of any requested ticket by an unprivileged user.</p></li><li class="listitem "><p>Disallow <code class="literal">slurm.conf</code> node configurations with <code class="literal">NodeName=ALL</code>.</p></li></ul></div></div><div class="sect4" id="id-command-changes-for-details-see-the-appropriate-man-page"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.8.2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Command Changes (for details, see the appropriate man page)</span> <a title="Permalink" class="permalink" href="#id-command-changes-for-details-see-the-appropriate-man-page">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Remove support for (non-functional) <code class="literal">--cpu-bind=boards</code>.</p></li><li class="listitem "><p>Added <code class="literal">--prefer</code> option at job submission to allow for 'soft' constraints.</p></li><li class="listitem "><p>Add <code class="literal">condflags=open</code> to sacctmgr show events to return open/currently down
events.</p></li><li class="listitem "><p><code class="literal">sacct -f</code> flag implies <code class="literal">-c</code> flag.</p></li><li class="listitem "><p><code class="literal">srun --overlap</code> now allows the step to share all resources (CPUs, memory, and
GRES), where previously <code class="literal">--overlap</code> only allowed the step to share CPUs with
other steps.</p></li></ul></div></div><div class="sect4" id="id-api-changes"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.8.2.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">API Changes</span> <a title="Permalink" class="permalink" href="#id-api-changes">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">openapi/v0.0.35</code> - Plugin has been removed.</p></li><li class="listitem "><p><code class="literal">burst_buffer</code> plugins - <code class="literal">err_msg</code> added to <code class="literal">bb_p_job_validate()</code>.</p></li><li class="listitem "><p><code class="literal">openapi</code> - added flags to <code class="literal">slurm_openapi_p_get_specification()</code>. Existing
plugins only need to update their prototype for the function as
manipulating the flags pointer is optional.</p></li><li class="listitem "><p><code class="literal">openapi</code> - Added <code class="literal">OAS_FLAG_MANGLE_OPID</code> to allow plugins to request that the
<code class="literal">operationId</code> of path methods be mangled with the full path to ensure
uniqueness.</p></li><li class="listitem "><p><code class="literal">openapi/[db]v0.0.36</code> - Plugins have been marked as deprecated and will be
removed in the next major release.</p></li><li class="listitem "><p>switch plugins - add <code class="literal">switch_g_job_complete()</code> function.</p></li></ul></div></div></div><div class="sect3" id="id-highlights-of-slurm-version-21-08"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.8.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Highlights of Slurm version 21.08</span> <a title="Permalink" class="permalink" href="#id-highlights-of-slurm-version-21-08">#</a></h4></div></div></div><div class="sect4" id="id-highlights"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.8.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Highlights</span> <a title="Permalink" class="permalink" href="#id-highlights">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Removed <code class="literal">gres/mic</code> plugin used to support Xeon Phi coprocessors.</p></li><li class="listitem "><p>Add <code class="literal">LimitFactor</code> to the QOS. A float that is factored into an associations
<code class="literal">GrpTRES</code> limits.  For example, if the LimitFactor is 2, then an association
with a <code class="literal">GrpTRES</code> of 30 CPUs, would be allowed to allocate 60 CPUs when
running under this QOS.</p></li><li class="listitem "><p>A job’s <code class="literal">next_step_id</code> counter now resets to 0 after being requeued.
Previously, the step id’s would continue from the job’s last run.</p></li><li class="listitem "><p>API change: Removed slurm_kill_job_msg and modified the function signature
for <code class="literal">slurm_kill_job2</code>. <code class="literal">slurm_kill_job2</code> should be used instead of
<code class="literal">slurm_kill_job_msg</code>.</p></li><li class="listitem "><p><code class="literal">AccountingStoreFlags=job_script</code> allows you to store the job’s batch script.</p></li><li class="listitem "><p><code class="literal">AccountingStoreFlags=job_env</code> allows you to store the job’s env vars.</p></li><li class="listitem "><p>Removed <code class="literal">sched/hold</code> plugin.</p></li><li class="listitem "><p><code class="literal">cli_filter/lua</code>, <code class="literal">jobcomp/lua</code>, <code class="literal">job_submit/lua</code> now load their scripts from the
same directory as the <code class="literal">slurm.conf</code> file (and thus now will respect changes
to the <code class="literal">SLURM_CONF</code> environment variable).</p></li><li class="listitem "><p><code class="literal">SPANK</code> - call <code class="literal">slurm_spank_init</code> if defined without <code class="literal">slurm_spank_slurmd_exit</code> in
<code class="literal">slurmd</code> context.</p></li><li class="listitem "><p>Add new <code class="literal">PLANNED</code> state to a node to represent when the backfill scheduler
has it planned to be used in the future instead of showing as <code class="literal">IDLE</code>.
sreport also has changed it’s cluster utilization report column name from
'Reserved' to 'Planned' to match this nomenclature.</p></li><li class="listitem "><p>Put node into <code class="literal">INVAL</code> state upon registering with an invalid node
configuration. Node must register with a valid configuration to continue.</p></li><li class="listitem "><p>Remove <code class="literal">SLURM_DIST_LLLP</code> environment variable in favor of just
<code class="literal">SLURM_DISTRIBUTION</code>.</p></li><li class="listitem "><p>Make <code class="literal">--cpu-bind=threads</code> default for <code class="literal">--threads-per-core</code> — can be
overridden by the CLI or an environment variable.</p></li><li class="listitem "><p><code class="literal">slurmd</code> - allow multiple comma-separated controllers to be specified in
configless mode with <code class="literal">--conf-server</code></p></li><li class="listitem "><p>Manually powering down of nodes with <code class="literal">scontrol</code> now ignores
<code class="literal">SuspendExc&lt;Nodes|Parts&gt;</code>.</p></li><li class="listitem "><p>Distinguish queued reboot requests (REBOOT@) from issued reboots (REBOOT^).</p></li><li class="listitem "><p><code class="literal">auth/jwt</code> - add support for RS256 tokens. Also permit the username in the
'username' field in addition to the 'sun' (Slurm UserName) field.</p></li><li class="listitem "><p>service files - change dependency to network-online rather than just
network to ensure DNS and other services are available.</p></li><li class="listitem "><p>Add "Extra" field to node to store extra information other than a comment.</p></li><li class="listitem "><p>Add <code class="literal">ResumeTimeout</code>, <code class="literal">SuspendTimeout</code> and <code class="literal">SuspendTime</code> to Partitions.</p></li><li class="listitem "><p>The <code class="literal">memory.force_empty</code> parameters is no longer set by <code class="literal">jobacct_gather/cgroup</code>
when deleting the cgroup`. This previously caused a significant delay (~2s)
when terminating a job, and is not believed to have provided any perceivable
benefit. However, this may lead to slightly higher reported kernel mem page
cache usage since the kernel cgroup memory is no longer freed immediately.</p></li><li class="listitem "><p><code class="literal">TaskPluginParam=verbose</code> is now treated as a default. Previously it would be
applied regardless of the job specifying a <code class="literal">--cpu-bind</code>.</p></li><li class="listitem "><p>Add <code class="literal">node_reg_mem_percent</code> <code class="literal">SlurmctldParameter</code> to define percentage of
memory nodes are allowed to register with.</p></li><li class="listitem "><p>Define and separate node power state transitions. Previously a powering
down node was in both states, <code class="literal">POWERING_OFF</code> and <code class="literal">POWERED_OFF</code>. These are now
separated.
e.g.
   <code class="literal">IDLE+POWERED_OFF</code> (<code class="literal">IDLE~</code>)
→ <code class="literal">IDLE+POWERING_UP</code> (<code class="literal">IDLE#</code>)   - Manual power up or allocation
→ <code class="literal">IDLE</code>
→ <code class="literal">IDLE+POWER_DOWN</code> (<code class="literal">IDLE!</code>)    - Node waiting for power down
→ <code class="literal">IDLE+POWERING_DOWN</code> (<code class="literal">IDLE%</code>) - Node powering down
→ <code class="literal">IDLE+POWERED_OFF</code> (<code class="literal">IDLE~</code>)   - Powered off</p></li><li class="listitem "><p>Some node state flag names have changed. These would be noticeable for
example if using a state flag to filter nodes with sinfo.
e.g.
<code class="literal">POWER_UP</code> → <code class="literal">POWERING_UP</code>
<code class="literal">POWER_DOWN</code> → <code class="literal">POWERED_DOWN</code>
<code class="literal">POWER_DOWN</code> now represents a node pending power down</p></li><li class="listitem "><p>Create a new process called <code class="literal">slurmscriptd</code> which runs <code class="literal">PrologSlurmctld</code> and
<code class="literal">EpilogSlurmctld</code>. This avoids <code class="literal">fork()</code> calls from <code class="literal">slurmctld</code>, and can avoid
performance issues if the slurmctld has a large memory footprint.</p></li><li class="listitem "><p>Pass JSON of job to node mappings to <code class="literal">ResumeProgram</code>.</p></li><li class="listitem "><p>QOS accrue limits only apply to the job QOS, not partition QOS.</p></li><li class="listitem "><p>Any return code from SPANK plugin or SPANK function that is not
<code class="literal">SLURM_SUCCESS</code> (zero) will be considered to be an error. Previously, only
negative return codes were considered an error.</p></li><li class="listitem "><p>Add support for automatically detecting and broadcasting executable shared
object dependencies for <code class="literal">sbcast</code> and <code class="literal">srun --bcast</code>.</p></li><li class="listitem "><p>All SPANK error codes now start at 3000. Where previously SPANK would give
a return code of 1, it will now return 3000. This change will break ABI
compatibility with SPANK plugins compiled against older version of Slurm.</p></li><li class="listitem "><p>SPANK plugins are now required to match the current Slurm release, and
must be recompiled for each new Slurm major release. (They do not need
to be recompiled when upgrading between maintenance releases.)</p></li><li class="listitem "><p><code class="literal">SLURM_NODE_ALIASES</code> now has brackets around the node’s address to be able to
distinguish IPv6 addresses. e.g. <code class="literal">&lt;node_name&gt;:[&lt;node_addr&gt;]:&lt;node_hostname&gt;</code></p></li><li class="listitem "><p>The <code class="literal">job_container/tmpfs</code> plugin now requires <code class="literal">PrologFlags=contain</code> to be set in
<code class="literal">slurm.conf</code>.</p></li><li class="listitem "><p>Limit <code class="literal">max_script_size</code> to 512 MB.</p></li></ul></div></div><div class="sect4" id="id-configuration-file-changes-for-details-see-the-appropriate-man-page"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.8.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuration File Changes (for details, see the appropriate man page)</span> <a title="Permalink" class="permalink" href="#id-configuration-file-changes-for-details-see-the-appropriate-man-page">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Errors detected in the parser handlers due to invalid configurations are now
propagated and can lead to fatal (and thus exit) the calling process.</p></li><li class="listitem "><p>Enforce a valid configuration for <code class="literal">AccountingStorageEnforce</code> in <code class="literal">slurm.conf</code>.
If the configuration is invalid, then an error message will be printed and
the command or daemon (including <code class="literal">slurmctld</code>) will not run.</p></li><li class="listitem "><p>Removed <code class="literal">AccountingStoreJobComment</code> option.  Please update your config to use
<code class="literal">AccountingStoreFlags=job_comment</code> instead.</p></li><li class="listitem "><p>Removed <code class="literal">DefaultStorage{Host,Loc,Pass,Port,Type,User}</code> options.</p></li><li class="listitem "><p>Removed <code class="literal">CacheGroups</code>, <code class="literal">CheckpointType</code>, <code class="literal">JobCheckpointDir</code>, <code class="literal">MemLimitEnforce</code>,
<code class="literal">SchedulerPort</code>, <code class="literal">SchedulerRootFilter</code> options.</p></li><li class="listitem "><p>Added <code class="literal">Script</code> to <code class="literal">DebugFlags</code> for debugging <code class="literal">slurmscriptd</code> (the process that runs
<code class="literal">slurmctld</code> scripts such as <code class="literal">PrologSlurmctld</code> and <code class="literal">EpilogSlurmctld</code>).</p></li><li class="listitem "><p>Rename <code class="literal">SbcastParameters</code> to <code class="literal">BcastParameters</code>.</p></li><li class="listitem "><p>systemd service files - add new <span class="quote">“<span class="quote ">-s</span>”</span> option to each daemon which will
change the working directory even with the <code class="literal">-D</code> option. (Ensures any core
files are placed in an accessible location, rather than <code class="literal">/</code>.)</p></li><li class="listitem "><p>Added <code class="literal">BcastParameters=send_libs</code> and <code class="literal">BcastExclude</code> options.</p></li><li class="listitem "><p>Remove the (incomplete) <code class="literal">burst_buffer/generic</code> plugin.</p></li><li class="listitem "><p>Make <code class="literal">SelectTypeParameters=CR_Core_Memory</code> default for <code class="literal">cons_tres</code> and <code class="literal">cons_res</code>.</p></li><li class="listitem "><p>Remove support for <code class="literal">TaskAffinity=yes</code> in <code class="literal">cgroup.conf</code>. Adding <code class="literal">task/affinity</code> to
<code class="literal">TaskPlugins</code> in <code class="literal">slurm.conf</code> is strongly recommended instead.</p></li></ul></div></div><div class="sect4" id="id-command-changes-for-details-see-the-appropriate-man-page-2"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.8.3.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Command Changes (for details, see the appropriate man page)</span> <a title="Permalink" class="permalink" href="#id-command-changes-for-details-see-the-appropriate-man-page-2">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Changed the <code class="literal">--format</code> handling for negative field widths (left justified)
to apply to the column headers as well as the printed fields.</p></li><li class="listitem "><p>Invalidate multiple partition requests when using partition based
associations.</p></li><li class="listitem "><p><code class="literal">scrontab</code> - create the temporary file under the <code class="literal">TMPDIR</code> environment variable
(if set), otherwise continue to use <code class="literal">TmpFS</code> as configured in <code class="literal">slurm.conf</code>.</p></li><li class="listitem "><p><code class="literal">sbcast / srun --bcast</code> - removed support for zlib compression. lz4 is vastly
superior in performance, and (counter-intuitively) zlib could provide worse
performance than no compression at all on many systems.</p></li><li class="listitem "><p><code class="literal">sacctmgr</code> - changed column headings to <code class="literal">ParentID</code> and <code class="literal">ParentName</code> instead
of <code class="literal">Par ID</code> and "Par Name` respectively.</p></li><li class="listitem "><p><code class="literal">SALLOC_THREADS_PER_CORE</code> and <code class="literal">SBATCH_THREADS_PER_CORE</code> have been added as
input environment variables for <code class="literal">salloc</code> and <code class="literal">sbatch</code>, respectively. They do
the same thing as <code class="literal">--threads-per-core</code>.</p></li><li class="listitem "><p>Don’t display node’s comment with <code class="literal">scontrol show nodes</code> unless set.</p></li><li class="listitem "><p>Added <code class="literal">SLURM_GPUS_ON_NODE</code> environment variable within each job/step.</p></li><li class="listitem "><p><code class="literal">sreport</code> - change to sorting <code class="literal">TopUsage</code> by the <code class="literal">--tres</code> option.</p></li><li class="listitem "><p><code class="literal">slurmrestd</code> - do not run allow operation as <code class="literal">SlurmUser</code>/root by default.</p></li><li class="listitem "><p><code class="literal">scontrol show node</code> now shows <code class="literal">State</code> as base_state+flags instead of
shortened state with flags appended. eg. <code class="literal">IDLE#</code> → <code class="literal">IDLE+POWERING_UP</code>.
Also <code class="literal">POWER</code> state flag string is <code class="literal">POWERED_DOWN</code>.</p></li><li class="listitem "><p><code class="literal">scrontab</code> - add ability to update crontab from a file or standard input.</p></li><li class="listitem "><p><code class="literal">scrontab</code> - added ability to set and expand variables.</p></li><li class="listitem "><p>Make <code class="literal">srun</code> sensitive to <code class="literal">BcastParameters</code>.</p></li><li class="listitem "><p>Added <code class="literal">sbcast/srun --send-libs</code>, <code class="literal">sbcast --exclude</code> and <code class="literal">srun --bcast-exclude</code>.</p></li><li class="listitem "><p>Changed <code class="literal">ReqMem</code> field in <code class="literal">sacct</code> to match memory from ReqTRES. It now shows
the requested memory of the whole job with a letter appended indicating
units (M for megabytes, G for gigabytes, etc.). <code class="literal">ReqMem</code> is only displayed for
the job, since the step does not have requested TRES. Previously <code class="literal">ReqMem</code>
was also displayed for the step but was just displaying <code class="literal">ReqMem</code> for the job.</p></li></ul></div></div><div class="sect4" id="id-api-changes-2"><div class="titlepage"><div><div><h5 class="title"><span class="number">6.8.3.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">API Changes</span> <a title="Permalink" class="permalink" href="#id-api-changes-2">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">jobcomp</code> plugin: change plugin API to <code class="literal">jobcomp_p_*()</code>.</p></li><li class="listitem "><p><code class="literal">sched</code> plugin: change plugin API to <code class="literal">sched_p_*()</code> and remove
<code class="literal">slurm_sched_p_initial_priority()</code> call.</p></li><li class="listitem "><p><code class="literal">step_ctx code</code> has been removed from the api.</p></li><li class="listitem "><p><code class="literal">slurm_stepd_get_info()</code>/<code class="literal">stepd_get_info()</code> has been removed from the api.</p></li><li class="listitem "><p>The v0.0.35 OpenAPI plugin has now been marked as deprecated.
Please convert your requests to the v0.0.37 OpenAPI plugin.</p></li></ul></div></div></div></div><div class="sect2" id="id-creating-containers-from-current-hpc-environment"><div class="titlepage"><div><div><h3 class="title"><span class="number">6.9 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Creating containers from current HPC environment</span> <a title="Permalink" class="permalink" href="#id-creating-containers-from-current-hpc-environment">#</a></h3></div></div></div><p>Usually users use environment modules to adjust their environment (that is, environment variables like <code class="literal">PATH</code>, <code class="literal">LD_LIBRARY_PATH</code>, <code class="literal">MANPATH</code> etc.) to pick exactly the tools and libraries they need for their work.
The same can be achieved with containers by including only those components in a container that are part of this environment.
This functionality is now provided using the <code class="literal">spack</code> and <code class="literal">singularity</code> applications.</p></div><div class="sect2" id="jsc-PED-2802"><div class="titlepage"><div><div><h3 class="title"><span class="number">6.10 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Slurm 23.02</span> <a title="Permalink" class="permalink" href="#jsc-PED-2802">#</a></h3></div></div></div><div class="sect3" id="id-important-notes-on-upgrading-slurm-from-a-previous-version"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.10.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Important Notes on Upgrading Slurm from a Previous Version</span> <a title="Permalink" class="permalink" href="#id-important-notes-on-upgrading-slurm-from-a-previous-version">#</a></h4></div></div></div><p>If using the <code class="literal">slurmdbd</code> (Slurm DataBase Daemon) you must update this first.</p><p>If using a backup DBD you must start the primary first to do any
database conversion, the backup will not start until this has happened.</p><p>The 23.02 <code class="literal">slurmdbd</code> will work with Slurm daemons of version 21.08 and above.
You will not need to update all clusters at the same time, but it is very
important to update <code class="literal">slurmdbd</code> first and having it running before updating
any other clusters making use of it.</p><p>Slurm can be upgraded from version 22.05 to version 23.02 without loss
of jobs or other state information. Upgrading directly from an earlier version
of Slurm will result in loss of state information.</p><p>All <code class="literal">SPANK</code> plugins must be recompiled when upgrading from any Slurm version
prior to 23.02.</p><div id="id-1.8.12.2.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>PMIx v1.x is no longer supported.</p></div></div><div class="sect3" id="id-highlights-2"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.10.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Highlights</span> <a title="Permalink" class="permalink" href="#id-highlights-2">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">slurmctld</code> - Add new RPC rate limiting feature. This is enabled through
<code class="literal">SlurmctldParameters=rl_enable</code>, otherwise disabled by default.</p></li><li class="listitem "><p>Make <code class="literal">scontrol</code> reconfigure and sending a <code class="literal">SIGHUP</code> to the <code class="literal">slurmctld</code> behave the
same. If you were using <code class="literal">SIGHUP</code> as a 'lighter' scontrol reconfigure to rotate
logs please update your scripts to use SIGUSR2 instead.</p></li><li class="listitem "><p>Change cloud nodes to show by default. <code class="literal">PrivateData=cloud</code> is no longer
needed.</p></li><li class="listitem "><p><code class="literal">sreport</code> - Count planned (FKA reserved) time for jobs running in <code class="literal">IGNORE_JOBS</code>
reservations. Previously was lumped into <code class="literal">IDLE</code> time.</p></li><li class="listitem "><p><code class="literal">job_container/tmpfs</code> - Support running with an arbitrary list of private
mount points (<code class="literal">/tmp</code> and <code class="literal">/dev/shm</code> are the default, but not required).</p></li><li class="listitem "><p><code class="literal">job_container/tmpfs</code> - Set more environment variables in <code class="literal">InitScript</code>.</p></li><li class="listitem "><p>Make all cgroup directories created by Slurm owned by root. This was the
behavior in cgroup/v2 but not in cgroup/v1 where by default the step
directories ownership were set to the user and group of the job.</p></li><li class="listitem "><p><code class="literal">accounting_storage/mysql</code> - change purge/archive to calculate record ages
based on end time, rather than start or submission times.</p></li><li class="listitem "><p><code class="literal">job_submit/lua</code> - add support for <code class="literal">log_user()</code> from <code class="literal">slurm_job_modify()</code>.</p></li><li class="listitem "><p>Run the following scripts in slurmscriptd instead of <code class="literal">slurmctld</code>:
<code class="literal">ResumeProgram</code>, <code class="literal">ResumeFailProgram</code>, <code class="literal">SuspendProgram</code>, <code class="literal">ResvProlog</code>, <code class="literal">ResvEpilog</code>,
and <code class="literal">RebootProgram</code> (only with <code class="literal">SlurmctldParameters=reboot_from_controller</code>).</p></li><li class="listitem "><p>Only permit changing log levels with <code class="literal">srun --slurmd-debug</code> by root
or <code class="literal">SlurmUser</code>.</p></li><li class="listitem "><p><code class="literal">slurmctld</code> will <code class="literal">fatal()</code> when reconfiguring the <code class="literal">job_submit</code> plugin fails.</p></li><li class="listitem "><p>Add PowerDownOnIdle partition option to power down nodes after nodes become
idle.</p></li><li class="listitem "><p>Add <span class="quote">“<span class="quote ">[jobid.stepid]</span>”</span> prefix from <code class="literal">slurmstepd</code> and <span class="quote">“<span class="quote ">slurmscriptd</span>”</span> prefix from
<code class="literal">slurmcriptd</code> to Syslog logging. Previously was only happening when logging
to a file.</p></li><li class="listitem "><p>Add purge and archive functionality for job environment and job batch script
records.</p></li><li class="listitem "><p>Extend support for Include files to all "configless" client commands.</p></li><li class="listitem "><p>Make node weight usable for powered down and rebooting nodes.</p></li><li class="listitem "><p>Removed <span class="quote">“<span class="quote ">launch</span>”</span> plugin.</p></li><li class="listitem "><p>Add <span class="quote">“<span class="quote ">Extra</span>”</span> field to job to store extra information other than a comment.</p></li><li class="listitem "><p>Add usage gathering for AMD (requires ROCM 5.5+) and NVIDIA gpus.</p></li><li class="listitem "><p>Add job’s allocated nodes, features, oversubscribe, partition, and
reservation to <code class="literal">SLURM_RESUME_FILE</code> output for power saving.</p></li><li class="listitem "><p>Automatically create directories for stdout/stderr output files. Paths may
use <code class="literal">%j</code> and related substitution characters as well.</p></li><li class="listitem "><p>Add <code class="literal">--tres-per-task</code> to <code class="literal">salloc</code>/<code class="literal">sbatch</code>/<code class="literal">srun</code>.</p></li><li class="listitem "><p>Allow <code class="literal">nodefeatures</code> plugin features to work with cloud nodes.
e.g. - Powered down nodes have no active changeable features.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Nodes can’t be changed to other active features until powered down.</p></li><li class="listitem "><p>Active changeable features are reset/cleared on power down.</p></li></ul></div></li><li class="listitem "><p>Make <code class="literal">slurmstepd</code> cgroups constrained by total configured memory from
<code class="literal">slurm.conf</code> (<code class="literal">NodeName=&lt;&gt; RealMemory=#</code>) instead of total physical memory.</p></li><li class="listitem "><p><code class="literal">node_features/helpers</code> - add support for the OR and parentheses operators
in a <code class="literal">--constraint</code> expression.</p></li><li class="listitem "><p><code class="literal">slurmctld</code> will <code class="literal">fatal()</code> when [Prolog|Epilog]Slurmctld are defined but are not
executable.</p></li><li class="listitem "><p>Validate node registered active features are a super set of node’s
currently active changeable features.</p></li><li class="listitem "><p>On clusters without any <code class="literal">PrologFlags</code> options, batch jobs with failed prologs
nolonger generate an output file.</p></li><li class="listitem "><p>Add <code class="literal">SLURM_JOB_START_TIME</code> and <code class="literal">SLURM_JOB_END_TIME</code> environment variables.</p></li><li class="listitem "><p>Add <code class="literal">SuspendExcStates</code> option to <code class="literal">slurm.conf</code> to avoid suspending/powering down
specific node states.</p></li><li class="listitem "><p>Add support for DCMI power readings in IPMI plugin.</p></li><li class="listitem "><p><code class="literal">slurmrestd</code> served <code class="literal">/slurm/v0.0.39</code> and <code class="literal">/slurmdb/v0.0.39</code> endpoints had major
changes from prior versions. Almost all schemas have been renamed and
modified. Sites using OpenAPI Generator clients are highly suggested to
upgrade to to using atleast version 6.x due to limitations with prior
versions.</p></li><li class="listitem "><p>Allow for <code class="literal">--nodelist</code> to contain more nodes than required by <code class="literal">--nodes</code>.</p></li><li class="listitem "><p>Rename <span class="quote">“<span class="quote ">nodes</span>”</span> to <span class="quote">“<span class="quote ">nodes_resume</span>”</span> in <code class="literal">SLURM_RESUME_FILE</code> job output.</p></li><li class="listitem "><p>Rename <span class="quote">“<span class="quote ">all_nodes</span>”</span> to <span class="quote">“<span class="quote ">all_nodes_resume</span>”</span> in <code class="literal">SLURM_RESUME_FILE</code> output.</p></li><li class="listitem "><p>Add <code class="literal">jobcomp/kafka</code> plugin.</p></li><li class="listitem "><p>Add new <code class="literal">PreemptParameters=reclaim_licenses</code> option which will allow higher
priority jobs to preempt jobs to free up used licenses. (This is only
enabled for with <code class="literal">PreemptModes</code> of <code class="literal">CANCEL</code> and <code class="literal">REQUEUE</code>, as Slurm cannot
guarantee suspended jobs will release licenses correctly.)</p></li><li class="listitem "><p><code class="literal">hpe/slingshot</code> - add support for the instant-on feature.</p></li><li class="listitem "><p>Add ability to update <code class="literal">SuspendExc*</code> parameters with <code class="literal">scontrol</code>.</p></li><li class="listitem "><p>Add ability to restore <code class="literal">SuspendExc*</code> parameters on restart with <code class="literal">slurmctld -R</code>
option.</p></li><li class="listitem "><p>Add ability to clear a GRES specification by setting it to "0" via
<span class="quote">“<span class="quote ">scontrol update job</span>”</span>.</p></li><li class="listitem "><p>Add <code class="literal">SLURM_JOB_OVERSUBSCRIBE</code> environment variable for <code class="literal">Epilog</code>, <code class="literal">Prolog</code>,
<code class="literal">EpilogSlurmctld</code>, <code class="literal">PrologSlurmctld</code>, and mail ouput.</p></li><li class="listitem "><p>System node down reasons are appended to existing reasons, separated by ':'.</p></li><li class="listitem "><p>New command scrun has been added. scrun acts as an Open Container Initiative
(OCI) runtime proxy to run containers seamlessly via Slurm.</p></li><li class="listitem "><p>Fixed <code class="literal">GpuFreqDef</code> option. When set in <code class="literal">slurm.conf</code>, it will be used if
<code class="literal">--gpu-freq</code> was not explicitly set by the job step.</p></li></ul></div></div><div class="sect3" id="id-configuration-file-changes-see-appropriate-man-page-for-details"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.10.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuration File Changes (see appropriate man page for details)</span> <a title="Permalink" class="permalink" href="#id-configuration-file-changes-see-appropriate-man-page-for-details">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">job_container.conf</code> - Added <span class="quote">“<span class="quote ">Dirs</span>”</span> option to list desired private mount
points.</p></li><li class="listitem "><p><code class="literal">node_features</code> plugins - invalid users specified for <code class="literal">AllowUserBoot</code> will now
result in <code class="literal">fatal()</code> rather than just an error.</p></li><li class="listitem "><p>Deprecate <code class="literal">AllowedKmemSpace</code>, <code class="literal">ConstrainKmemSpace</code>, <code class="literal">MaxKmemPercent</code>, and
<code class="literal">MinKmemSpace</code>.</p></li><li class="listitem "><p>Allow jobs to queue even if the user is not in <code class="literal">AllowGroups</code> when
<code class="literal">EnforcePartLimits=no</code> is set. This ensures consistency for all the Partition
access controls, and matches the documented behavior for <code class="literal">EnforcePartLimits</code>.</p></li><li class="listitem "><p>Add <code class="literal">InfluxDBTimeout</code> parameter to <code class="literal">acct_gather.conf</code>.</p></li><li class="listitem "><p><code class="literal">job_container/tmpfs</code> - add support for expanding <code class="literal">%h</code> and <code class="literal">%n</code> in <code class="literal">BasePath</code>.</p></li><li class="listitem "><p><code class="literal">slurm.conf</code> - Removed <code class="literal">SlurmctldPlugstack</code> option.</p></li><li class="listitem "><p>Add new <code class="literal">SlurmctldParameters=validate_nodeaddr_threads=&lt;number&gt;</code> option to
allow concurrent hostname resolution at <code class="literal">slurmctld</code> startup.</p></li><li class="listitem "><p>Add new <code class="literal">AccountingStoreFlags=job_extra</code> option to store a job’s extra field
in the database.</p></li><li class="listitem "><p>Add new <span class="quote">“<span class="quote ">defer_batch</span>”</span> option to <code class="literal">SchedulerParameters</code> to only defer
scheduling for batch jobs.</p></li><li class="listitem "><p>Add new <code class="literal">DebugFlags</code> option <span class="quote">“<span class="quote ">JobComp</span>”</span> to replace <span class="quote">“<span class="quote ">Elasticsearch</span>”</span>.</p></li><li class="listitem "><p>Add configurable job requeue limit parameter - <code class="literal">MaxBatchRequeue</code> - in
<code class="literal">slurm.conf</code> to permit changes from the old hard-coded value of 5.</p></li><li class="listitem "><p><code class="literal">helpers.conf</code> - Allow specification of node specific features.</p></li><li class="listitem "><p><code class="literal">helpers.conf</code> - Allow many features to one helper script.</p></li><li class="listitem "><p><code class="literal">job_container/tmpfs</code> - Add <span class="quote">“<span class="quote ">Shared</span>”</span> option to support shared namespaces.
This allows autofs to work with the <code class="literal">job_container/tmpfs</code> plugin when enabled.</p></li><li class="listitem "><p><code class="literal">acct_gather.conf</code> - Added <code class="literal">EnergyIPMIPowerSensors=Node=DCMI</code> and
<code class="literal">Node=DCMI_ENHANCED</code>.</p></li><li class="listitem "><p>Add new <span class="quote">“<span class="quote ">getnameinfo_cache_timeout=&lt;number&gt;</span>”</span> option to
CommunicationParameters to adjust or disable caching the results of
<code class="literal">getnameinfo()</code>.</p></li><li class="listitem "><p>Add new PrologFlags=ForceRequeueOnFail option to automatically requeue
batch jobs on Prolog failures regardless of the job --requeue setting.</p></li><li class="listitem "><p>Add <code class="literal">HealthCheckNodeState=NONDRAINED_IDLE</code> option.</p></li><li class="listitem "><p>Add <span class="quote">“<span class="quote ">explicit</span>”</span> to Flags in <code class="literal">gres.conf</code>. This makes it so the gres is not
automatically added to a job’s allocation when <code class="literal">--exclusive</code> is used. Note
that this is a per-node flag.</p></li><li class="listitem "><p>Moved the <span class="quote">“<span class="quote ">preempt_</span>”</span> options from <code class="literal">SchedulerParameters</code> to <code class="literal">PreemptParameters</code>,
and dropped the prefix from the option names. (The old options will still
be parsed for backwards compatibility, but are now undocumented.)</p></li><li class="listitem "><p>Add <code class="literal">LaunchParameters=ulimit_pam_adopt</code>, which enables setting <code class="literal">RLIMIT_RSS</code> in
adopted processes.</p></li><li class="listitem "><p>Update SwitchParameters=job_vni to enable/disable creating job VNIs for all
jobs, or when a user requests them.</p></li><li class="listitem "><p>Update <code class="literal">SwitchParameters=single_node_vni</code> to enable/disable creating single
node VNIs for all jobs, or when a user requests them.</p></li><li class="listitem "><p>Add ability to preserve <code class="literal">SuspendExc*</code> parameters on reconfig with
<code class="literal">ReconfigFlags=KeepPowerSaveSettings</code>.</p></li><li class="listitem "><p><code class="literal">slurmdbd.conf</code> - Add new <code class="literal">AllResourcesAbsolute</code> to force all new resources
to be created with the <code class="literal">Absolute</code> flag.</p></li><li class="listitem "><p><code class="literal">topology/tree</code> - Add new <code class="literal">TopologyParam=SwitchAsNodeRank</code> option to reorder
nodes based on switch layout. This can be useful if the naming convention
for the nodes does not natually map to the network topology.</p></li><li class="listitem "><p>Removed the default setting for <code class="literal">GpuFreqDef</code>. If unset, no attempt to change
the GPU frequency will be made if <code class="literal">--gpu-freq</code> is not set for the step.</p></li></ul></div></div><div class="sect3" id="id-command-changes-see-man-pages-for-details"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.10.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Command Changes (see man pages for details)</span> <a title="Permalink" class="permalink" href="#id-command-changes-see-man-pages-for-details">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">sacctmgr</code> - no longer force updates to the <code class="literal">AdminComment</code>, <code class="literal">Comment</code>, or
<code class="literal">SystemComment</code> to lower-case.</p></li><li class="listitem "><p><code class="literal">sinfo</code> - Add <code class="literal">-F/--future</code> option to sinfo to display future nodes.</p></li><li class="listitem "><p><code class="literal">sacct</code> - Rename <span class="quote">“<span class="quote ">Reserved</span>”</span> field to <span class="quote">“<span class="quote ">Planned</span>”</span> to match sreport and the
nomenclature of the 'Planned' node.</p></li><li class="listitem "><p><code class="literal">scontrol</code> - advanced reservation flag <code class="literal">MAINT</code> will no longer replace nodes,
similar to <code class="literal">STATIC_ALLOC</code></p></li><li class="listitem "><p><code class="literal">sbatch</code> - add parsing for <code class="literal">#PBS -d</code> and <code class="literal">#PBS -w</code>.</p></li><li class="listitem "><p><code class="literal">scontrol</code> show <code class="literal">assoc_mgr</code> will show username(uid) instead of uid in
QoS section.</p></li><li class="listitem "><p>Add <code class="literal">strigger --draining</code> and <code class="literal">-R</code>/<code class="literal">--resume</code> options.</p></li><li class="listitem "><p>Change <code class="literal">--oversubscribe</code> and <code class="literal">--exclusive</code> to be mutually exclusive for job
submission. Job submission commands will now fatal if both are set.
Previously, these options would override each other, with the last one in
the job submission command taking effect.</p></li><li class="listitem "><p><code class="literal">scontrol</code> - Requested <code class="literal">TRES</code> and allocated <code class="literal">TRES</code> will now always be printed when
showing jobs, instead of one <code class="literal">TRES</code> output that was either the requested or
allocated.</p></li><li class="listitem "><p><code class="literal">srun --ntasks-per-core</code> now applies to job and step allocations. Now, use of
<code class="literal">--ntasks-per-core=1</code> implies <code class="literal">--cpu-bind=cores</code> and <code class="literal">--ntasks-per-core&gt;1</code> implies
<code class="literal">--cpu-bind=threads</code>.</p></li><li class="listitem "><p><code class="literal">salloc</code>/<code class="literal">sbatch</code>/<code class="literal">srun</code> - Check and abort if ntasks-per-core &gt; threads-per-core.</p></li><li class="listitem "><p><code class="literal">scontrol</code> - Add <code class="literal">ResumeAfter=&lt;secs&gt;</code> option to <span class="quote">“<span class="quote ">scontrol update nodename=</span>”</span>.</p></li><li class="listitem "><p>Add a new <span class="quote">“<span class="quote ">nodes=</span>”</span> argument to <code class="literal">scontrol setdebug</code> to allow the debug level
on the <code class="literal">slurmd</code> processes to be temporarily altered.</p></li><li class="listitem "><p>Add a new <span class="quote">“<span class="quote ">nodes=</span>”</span> argument to <span class="quote">“<span class="quote ">scontrol setdebugflags</span>”</span> as well.</p></li><li class="listitem "><p>Make it so <code class="literal">scrontab</code> prints client-side the <code class="literal">job_submit()</code> error messsage (which can
be set i.e. by using the <code class="literal">log_user()</code> function for the lua plugin).</p></li><li class="listitem "><p><code class="literal">scontrol</code> - Reservations will not be allowed to have <code class="literal">STATIC_ALLOC</code> or <code class="literal">MAINT</code>
flags and <code class="literal">REPLACE[_DOWN]</code> flags simultaneously.</p></li><li class="listitem "><p><code class="literal">scontrol</code> - Reservations will only accept one reoccurring flag when
being created or updated.</p></li><li class="listitem "><p><code class="literal">scontrol</code> - A reservation cannot be updated to be reoccurring if it is
already a floating reservation.</p></li><li class="listitem "><p><code class="literal">squeue</code> - removed unused <span class="quote">“<span class="quote ">%s</span>”</span> and <span class="quote">“<span class="quote ">SelectJobInfo</span>”</span> formats.</p></li><li class="listitem "><p><code class="literal">squeue</code> - align print format for exit and derived codes with that of other
components (<code class="literal">&lt;exit_status&gt;:&lt;signal_number&gt;</code>).</p></li><li class="listitem "><p><code class="literal">sacct</code> - Add <code class="literal">--array</code> option to expand job arrays and display array tasks on
separate lines.</p></li><li class="listitem "><p>Partial support for <span class="quote">“<span class="quote ">--json</span>”</span> and <span class="quote">“<span class="quote ">--yaml</span>”</span> formated outputs have been
implemented for <code class="literal">sacctmgr</code>, <code class="literal">sdiag</code>, <code class="literal">sinfo</code>, <code class="literal">squeue</code>, and <code class="literal">scontrol</code>. The resultant
data ouput will be filtered by normal command arguments. Formatting
arguments will continue to be ignored.</p></li><li class="listitem "><p><code class="literal">salloc</code>/<code class="literal">sbatch</code>/<code class="literal">srun</code> - extended the <code class="literal">--nodes</code> syntax to allow for a list of
valid node counts to be allocated to the job. This also supports a "step
count" value (e.g., <code class="literal">--nodes=20-100:20</code> is equivalent to
<code class="literal">--nodes=20,40,60,80,100</code>) which can simplify the syntax when the job needs
to scale by a certain "chunk" size.</p></li><li class="listitem "><p><code class="literal">srun</code> - add user requestible vnis with <span class="quote">“<span class="quote ">--network=job_vni</span>”</span> option.</p></li><li class="listitem "><p><code class="literal">srun</code> - add user requestible single node VNIs with the
<span class="quote">“<span class="quote ">--network=single_node_vni</span>”</span> option.</p></li></ul></div></div><div class="sect3" id="id-api-changes-3"><div class="titlepage"><div><div><h4 class="title"><span class="number">6.10.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">API Changes</span> <a title="Permalink" class="permalink" href="#id-api-changes-3">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">job_container</code> plugins - <code class="literal">container_p_stepd_create()</code> function signature
replaced <code class="literal">uint32_t</code> uid with <code class="literal">stepd_step_rec_t*</code> step.</p></li><li class="listitem "><p><code class="literal">gres</code> plugins - <code class="literal">gres_g_get_devices()</code> function signature replaced <code class="literal">pid_t</code> pid
with <code class="literal">stepd_step_rec_t*</code> step.</p></li><li class="listitem "><p><code class="literal">cgroup</code> plugins - <code class="literal">task_cgroup_devices_constrain()</code> function signature removed
<code class="literal">pid_t</code> pid.</p></li><li class="listitem "><p><code class="literal">task</code> plugins - replace <code class="literal">task_p_pre_set_affinity()</code>, <code class="literal">task_p_set_affinity()</code>, and
<code class="literal">task_p_post_set_affinity()</code> with <code class="literal">task_p_pre_launch_priv()</code> like it was back in
slurm 20.11.</p></li><li class="listitem "><p>Allow for concurrent processing of <code class="literal">job_submit_g_submit()</code> and
<code class="literal">job_submit_g_modify()</code> calls. If your plugin is not capable of concurrent
operation you must add additional locking within your plugin.</p></li><li class="listitem "><p>Removed return value from <code class="literal">slurm_list_append()</code>.</p></li><li class="listitem "><p>The <code class="literal">List</code> and <code class="literal">ListIterator</code> types have been removed in favor of <code class="literal">list_t</code> and
<code class="literal">list_itr_t</code> respectively.</p></li><li class="listitem "><p><code class="literal">burst buffer</code> plugins - add <code class="literal">bb_g_build_het_job_script()</code>.
<code class="literal">bb_g_get_status()</code> - added authenticated UID and GID.
<code class="literal">bb_g_run_script()</code> - added <code class="literal">job_info</code> argument.</p></li><li class="listitem "><p><code class="literal">burst_buffer.lua</code> - Pass UID and GID to most hooks. Pass <code class="literal">job_info</code> (detailed
job information) to many hooks. See <code class="literal">etc/burst_buffer.lua.example</code> for a
complete list of changes. WARNING: Backwards compatibility is broken for
<code class="literal">slurm_bb_get_status</code>: UID and GID are passed before the variadic arguments.
If UID and GID are not explicitly listed as arguments to
<code class="literal">slurm_bb_get_status()</code>, then they will be included in the variadic arguments.
Backwards compatibility is maintained for all other hooks because the new
arguments are passed after the existing arguments.</p></li><li class="listitem "><p><code class="literal">node_features</code> plugins - <code class="literal">node_features_p_reboot_weight()</code> function removed.
<code class="literal">node_features_p_job_valid()</code> - added parameter <code class="literal">feature_list</code>.
<code class="literal">node_features_p_job_xlate()</code> - added parameters <code class="literal">feature_list</code> and
<code class="literal">job_node_bitmap</code>.</p></li><li class="listitem "><p>New <code class="literal">data_parser</code> interface with v0.0.39 plugin.</p></li></ul></div></div></div></div><div class="sect1" id="removed-deprecated"><div class="titlepage"><div><div><h2 class="title"><span class="number">7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Removed and deprecated features and packages</span> <a title="Permalink" class="permalink" href="#removed-deprecated">#</a></h2></div></div></div><p>This section lists features and packages that were removed from SUSE Linux Enterprise for High-Performance Computing or will be removed in upcoming versions.</p><div class="sect2" id="removed"><div class="titlepage"><div><div><h3 class="title"><span class="number">7.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Removed features and packages</span> <a title="Permalink" class="permalink" href="#removed">#</a></h3></div></div></div><p>The following features and packages have been removed in this release.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Python 2 bindings for <code class="literal">genders</code> has been removed.
These are now provided for Python 3.</p></li></ul></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Ganglia is not supported anymore in 15 SP4.
It has been replaced with Grafana (<a class="link" href="https://grafana.com/" target="_blank">https://grafana.com/</a>)</p></li></ul></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Due to a lack of usage by customers, some library packages have been removed from the  HPC module in SLE HPC 15 SP4. On SUSE Linux Enterprise you can build your own library using <code class="literal">spack</code>.
These libraries will continue to be available through SUSE Package Hub.
The following libraries have been removed:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">boost</code></p></li><li class="listitem "><p><code class="literal">adios</code></p></li><li class="listitem "><p><code class="literal">gsl</code></p></li><li class="listitem "><p><code class="literal">fftw3</code></p></li><li class="listitem "><p><code class="literal">hypre</code></p></li><li class="listitem "><p><code class="literal">metis</code></p></li><li class="listitem "><p><code class="literal">mumps</code></p></li><li class="listitem "><p><code class="literal">netcdf</code></p></li><li class="listitem "><p><code class="literal">ocr</code></p></li><li class="listitem "><p><code class="literal">petsc</code></p></li><li class="listitem "><p><code class="literal">ptscotch</code></p></li><li class="listitem "><p><code class="literal">scalapack</code></p></li><li class="listitem "><p><code class="literal">superlu</code></p></li><li class="listitem "><p><code class="literal">trilinos</code></p></li></ul></div></li></ul></div></div><div class="sect2" id="deprecated"><div class="titlepage"><div><div><h3 class="title"><span class="number">7.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Deprecated features and packages</span> <a title="Permalink" class="permalink" href="#deprecated">#</a></h3></div></div></div><p>The following features and packages are deprecated and will be removed in a future version of SUSE Linux Enterprise for High-Performance Computing.</p></div></div><div class="sect1" id="source-code"><div class="titlepage"><div><div><h2 class="title"><span class="number">8 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Obtaining source code</span> <a title="Permalink" class="permalink" href="#source-code">#</a></h2></div></div></div><p>This SUSE product includes materials licensed to SUSE under the GNU
General Public License (GPL).
The GPL requires SUSE to provide the source code that corresponds to the
GPL-licensed material.
The source code is available for download at <a class="link" href="https://www.suse.com/download/sle-hpc/" target="_blank">https://www.suse.com/download/sle-hpc/</a> on Medium 2.
For up to three years after distribution of the SUSE product, upon request, SUSE will mail a copy of the source code.
Send requests by e-mail to <a class="link" href="mailto:sle_source_request@suse.com" target="_blank">sle_source_request@suse.com</a>.
SUSE may charge a reasonable fee to recover distribution costs.</p></div><div class="sect1" id="legal"><div class="titlepage"><div><div><h2 class="title"><span class="number">9 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Legal notices</span> <a title="Permalink" class="permalink" href="#legal">#</a></h2></div></div></div><p>SUSE makes no representations or warranties with regard to the contents or use of this documentation, and specifically disclaims any express or implied warranties of merchantability or fitness for any particular purpose.
Further, SUSE reserves the right to revise this publication and to make changes to its content, at any time, without the obligation to notify any person or entity of such revisions or changes.</p><p>Further, SUSE makes no representations or warranties with regard to any software, and specifically disclaims any express or implied warranties of merchantability or fitness for any particular purpose.
Further, SUSE reserves the right to make changes to any and all parts of SUSE software, at any time, without any obligation to notify any person or entity of such changes.</p><p>Any products or technical information provided under this Agreement may be subject to U.S. export controls and the trade laws of other countries.
You agree to comply with all export control regulations and to obtain any required licenses or classifications to export, re-export, or import deliverables.
You agree not to export or re-export to entities on the current U.S. export exclusion lists or to any embargoed or terrorist countries as specified in U.S. export laws.
You agree to not use deliverables for prohibited nuclear, missile, or chemical/biological weaponry end uses.
Refer to <a class="link" href="https://www.suse.com/company/legal/" target="_blank">https://www.suse.com/company/legal/</a> for more information on exporting SUSE software.
SUSE assumes no responsibility for your failure to obtain any necessary export approvals.</p><p>Copyright © 2010-2023 SUSE LLC.
</p><p>This release notes document is licensed under a Creative Commons Attribution-NoDerivatives 4.0 International License (CC-BY-ND-4.0). You should have received a copy of the license along with this document. If not, see <a class="link" href="https://creativecommons.org/licenses/by-nd/4.0/" target="_blank">https://creativecommons.org/licenses/by-nd/4.0/</a>.</p><p>SUSE has intellectual property rights relating to technology embodied in the product that is described in this document.
In particular, and without limitation, these intellectual property rights may include one or more of the U.S. patents listed at <a class="link" href="https://www.suse.com/company/legal/" target="_blank">https://www.suse.com/company/legal/</a> and one or more additional patents or pending patent applications in the U.S. and other countries.</p><p>For SUSE trademarks, see the SUSE Trademark and Service Mark list (<a class="link" href="https://www.suse.com/company/legal/" target="_blank">https://www.suse.com/company/legal/</a>).
All third-party trademarks are the property of their respective owners.</p></div><div class="appendix " id="changelog"><div class="titlepage"><div><div><h2 class="title"><span class="number">A </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Changelog for 15 SP4</span> <a title="Permalink" class="permalink" href="#changelog">#</a></h2></div></div></div><div class="line"></div><div class="sect2" id="prerelease"><div class="titlepage"><div><div><h3 class="title"><span class="number">A.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Pre-release</span> <a title="Permalink" class="permalink" href="#prerelease">#</a></h3></div></div></div><div class="sect3" id="id-new"><div class="titlepage"><div><div><h4 class="title"><span class="number">A.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">New</span> <a title="Permalink" class="permalink" href="#id-new">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><a class="xref" href="#jsc-PED-2802" title="6.10. Slurm 23.02">Section 6.10, “Slurm 23.02”</a> (<a class="link" href="https://jira.suse.com/browse/PED-2802" target="_blank">Jira</a>)</p></li><li class="listitem "><p><a class="xref" href="#jsc-PED-2803" title="6.6. spack">Section 6.6, “<code class="literal">spack</code>”</a> (<a class="link" href="https://jira.suse.com/browse/PED-2803" target="_blank">Jira</a>)</p></li></ul></div></div></div><div class="sect2" id="release-2022-11-30"><div class="titlepage"><div><div><h3 class="title"><span class="number">A.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">2022-11-30</span> <a title="Permalink" class="permalink" href="#release-2022-11-30">#</a></h3></div></div></div><div class="sect3" id="id-new-2"><div class="titlepage"><div><div><h4 class="title"><span class="number">A.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">New</span> <a title="Permalink" class="permalink" href="#id-new-2">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Added <a class="xref" href="#jsc-SLE-24988" title="6.1. Enriched system visibility in the SUSE Customer Center (SCC)">Section 6.1, “Enriched system visibility in the SUSE Customer Center (SCC)”</a> (<a class="link" href="https://jira.suse.com/browse/SLE-24988" target="_blank">Jira</a>)</p></li></ul></div></div></div><div class="sect2" id="release-2022-08-31"><div class="titlepage"><div><div><h3 class="title"><span class="number">A.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">2022-08-31</span> <a title="Permalink" class="permalink" href="#release-2022-08-31">#</a></h3></div></div></div><div class="sect3" id="id-new-3"><div class="titlepage"><div><div><h4 class="title"><span class="number">A.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">New</span> <a title="Permalink" class="permalink" href="#id-new-3">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Added <a class="xref" href="#jsc-SLE-22743" title="6.2. Automatically opened ports">Section 6.2, “Automatically opened ports”</a> (<a class="link" href="https://jira.suse.com/browse/SLE-22743" target="_blank">Jira</a>)</p></li></ul></div></div></div><div class="sect2" id="release-2022-05-11"><div class="titlepage"><div><div><h3 class="title"><span class="number">A.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">2022-05-11</span> <a title="Permalink" class="permalink" href="#release-2022-05-11">#</a></h3></div></div></div><div class="sect3" id="id-new-4"><div class="titlepage"><div><div><h4 class="title"><span class="number">A.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">New</span> <a title="Permalink" class="permalink" href="#id-new-4">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Added this changelog</p></li></ul></div></div></div><div class="sect2" id="release-2022-03-23"><div class="titlepage"><div><div><h3 class="title"><span class="number">A.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">2022-03-23</span> <a title="Permalink" class="permalink" href="#release-2022-03-23">#</a></h3></div></div></div><div class="sect3" id="id-new-5"><div class="titlepage"><div><div><h4 class="title"><span class="number">A.5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">New</span> <a title="Permalink" class="permalink" href="#id-new-5">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Added <a class="xref" href="#jsc-SLE-12352" title="6.8. Slurm">Section 6.8, “Slurm”</a> (<a class="link" href="https://jira.suse.com/browse/SLE-12352" target="_blank">Jira</a>)</p></li><li class="listitem "><p>Added notes about <code class="literal">dolly</code>, <code class="literal">memkind</code>, <code class="literal">openblas</code>, <code class="literal">spack</code>, and <code class="literal">mpich</code> in <a class="xref" href="#all-architecture" title="6. Changes affecting all architectures">Section 6, “Changes affecting all architectures”</a></p></li><li class="listitem "><p>Added note about Ganglia being unsupported in <a class="xref" href="#removed-deprecated" title="7. Removed and deprecated features and packages">Section 7, “Removed and deprecated features and packages”</a> (<a class="link" href="https://jira.suse.com/browse/SLE-17777" target="_blank">Jira</a>)</p></li><li class="listitem "><p>Added note about removal of Python 2 bindings for <code class="literal">genders</code> (<a class="link" href="https://jira.suse.com/browse/SLE-23359" target="_blank">Jira</a>)</p></li></ul></div></div><div class="sect3" id="id-updates"><div class="titlepage"><div><div><h4 class="title"><span class="number">A.5.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Updates</span> <a title="Permalink" class="permalink" href="#id-updates">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Added a note about building libraries using <code class="literal">spack</code> in <a class="xref" href="#removed-deprecated" title="7. Removed and deprecated features and packages">Section 7, “Removed and deprecated features and packages”</a> (<a class="link" href="https://jira.suse.com/browse/SLE-17776" target="_blank">Jira</a>)</p></li><li class="listitem "><p>Added <code class="literal">adios</code> and <code class="literal">superlu</code> to the list of removed libraries in <a class="xref" href="#removed-deprecated" title="7. Removed and deprecated features and packages">Section 7, “Removed and deprecated features and packages”</a></p></li></ul></div></div></div><div class="sect2" id="release-2021-11-03"><div class="titlepage"><div><div><h3 class="title"><span class="number">A.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">2021-11-03</span> <a title="Permalink" class="permalink" href="#release-2021-11-03">#</a></h3></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Initial SP4 release</p></li></ul></div></div></div></div></div><div class="page-bottom"><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2023 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>